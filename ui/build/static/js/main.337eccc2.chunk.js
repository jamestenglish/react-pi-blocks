(this["webpackJsonpreact-pi-blocks-ui"]=this["webpackJsonpreact-pi-blocks-ui"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(4),o=n(0),i=n.n(o),r=n(11),l=n.n(r),c=(n(144),n(13)),s=n(12),u=n(34),p=(n(145),n(2)),d=n.n(p),m=n(19),b=n.n(m);d.a.Blocks.new_boundary_function={init:function(){this.appendDummyInput().appendField(new d.a.FieldTextInput("Boundary Function Name"),"Name"),this.appendStatementInput("Content").setCheck(null),this.setInputsInline(!0),this.setColour(315),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.new_boundary_function=function(e){return"def "+e.getFieldValue("Name")+"(_object,**kwargs):\n"+d.a.JavaScript.statementToCode(e,"Content")+"\n"},d.a.Blocks.return={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("return"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.return=function(e){return"return "+d.a.JavaScript.valueToCode(e,"NAME",d.a.Javascript.ORDER_ATOMIC)+"\n"},d.a.Blocks.board_setup={init:function(){this.appendDummyInput().appendField("Start"),this.setHelpUrl(""),this.setColour(50),this.appendStatementInput("MAIN").setCheck(null)}},d.a.JavaScript.board_setup=function(e){var t=d.a.JavaScript.statementToCode(e,"MAIN");return'\n  board.on("ready", () => {\n    '.concat(t,"\n  });\n  ")};var h,f=n(46),g=n(17),j="LED",v="BUTTON",O="PIN",_="PCF8591",x="SENSOR",C=(h={},Object(g.a)(h,j,"#6CB0F2"),Object(g.a)(h,v,"#6549DA"),Object(g.a)(h,O,"#9CDEF6"),Object(g.a)(h,_,"#FCA481"),Object(g.a)(h,x,"#A392E9"),h),y=function(e){return null===e||void 0===e||""===e};console.log({Blockly:d.a,jsBlockly:b.a});var S=function(e){var t=e.inputType,n=e.color,a=void 0===n?230:n;return{block:{setGenerator:function(e){var n=e.useText,o=e.variableName;return function(){this.appendDummyInput().appendField("Make Pin"),this.appendValueInput(O).setCheck(O),this.appendDummyInput().appendField(n),this.appendDummyInput(t).appendField(new d.a.FieldVariable(o,null,[t],t),t),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(a),this.setTooltip(""),this.setHelpUrl("")}},getGenerator:function(e){var n=e.variableName;return function(){this.appendDummyInput().appendField(new d.a.FieldVariable(n,null,[t],t),t),this.setOutput(!0,t),this.setColour(a)}},commandGenerator:function(e){var n=e.dropDownArray,o=e.variableName,i=e.validatorFunctionName,r=void 0===i?null:i;return function(){var e=null;if(null!=r){var i=this[r];i&&(e=i)}this.appendDummyInput().appendField("Make"),this.appendDummyInput(t).appendField(new d.a.FieldVariable(o,null,[t],t),t),this.appendDummyInput().appendField(new d.a.FieldDropdown(n,e),"".concat(t,"_COMMAND")),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(a),this.setTooltip(""),this.setHelpUrl("")}}},code:{setGenerator:function(e){var n=e.constructorName;return function(e){var a=d.a.JavaScript.valueToCode(e,O,d.a.JavaScript.ORDER_ATOMIC),o=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return y(a)||y(o)?"":"".concat(o," = new ").concat(n,"(").concat(a,");\n")}},getGenerator:function(){return function(e){return[d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE),d.a.JavaScript.ORDER_ATOMIC]}},commandGenerator:function(){return function(e){var n=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);if(y(n))return"";var a=e.getFieldValue("".concat(t,"_COMMAND"));return"".concat(n).concat(a,";\n")}}}}},N=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n][1])return!0;return!1},F=S({inputType:"LED",color:C.LED}),I=F.code,T=F.block,E="LED Name";d.a.Blocks.set_led={init:T.setGenerator({useText:"be used for LED named",variableName:E})},d.a.JavaScript.set_led=I.setGenerator({constructorName:"five.Led"}),d.a.Blocks.get_led={init:T.getGenerator({variableName:E})},d.a.JavaScript.get_led=I.getGenerator();var k,P={blink:{dropDownItem:"Blink",beforeText:"every",afterText:"milliseconds",createFieldBlock:function(){return new d.a.FieldNumber(500,0)},fieldName:"BLINK_TIME_IN_MS",codeGenerator:function(e){var t=d.a.JavaScript.valueToCode(e,"LED",d.a.JavaScript.ORDER_ATOMIC);if(y(t))return"";var n=d.a.JavaScript.variableDB_.getName(t,d.a.Variables.NAME_TYPE),a=e.getFieldValue("LED_COMMAND"),o=e.getFieldValue("BLINK_TIME_IN_MS");return"".concat(n,".").concat(a,"(").concat(o,");\n")}}},D=(k=P,Object.keys(k).reduce((function(e,t){return[].concat(Object(f.a)(e),[[k[t].dropDownItem,t]])}),[]));d.a.Blocks.led_on_off={init:T.commandGenerator({dropDownArray:[].concat([["Turn On",".on()"],["Turn Off",".off()"],["Start Pulsing",".pulse()"],["Stop Pulsing",".stop()"],["Fade In",".fadeIn()"],["Fade Out",".fadeOut()"]],Object(f.a)(D)),validatorFunctionName:"validate",variableName:E}),mutationToDom:function(){var e=document.createElement("mutation"),t=this.getFieldValue("LED_COMMAND");return N(t,D)?e.setAttribute("additionalParam",t):e.setAttribute("additionalParam",""),e},domToMutation:function(e){var t=e.getAttribute("additionalParam");this.updateShape_(t)},validate:function(e){return this.getSourceBlock().updateShape_(e),e},updateShape_:function(e){var t=N(e,D),n=this.getInput("ADDITIONAL_PARAM");if(t){if(!n){var a=P[e],o=a.beforeText,i=a.createFieldBlock,r=a.fieldName,l=a.afterText;this.appendDummyInput("ADDITIONAL_PARAM").appendField(o).appendField(i(),r).appendField(l)}}else n&&this.removeInput("ADDITIONAL_PARAM")}},d.a.JavaScript.led_on_off=function(e){var t=e.getFieldValue("LED_COMMAND");return N(t,D)?P[t].codeGenerator(e):I.commandGenerator()(e)};var A=v,w=C.BUTTON,M="Button Name",B=S({inputType:A,color:w}),V=B.code,J=B.block;d.a.Blocks.set_button={init:J.setGenerator({useText:"be used for Button named",variableName:M})},d.a.JavaScript.set_button=V.setGenerator({constructorName:"five.Button"}),d.a.Blocks.get_button={init:J.getGenerator({variableName:M})},d.a.JavaScript.get_button=V.getGenerator(),d.a.Blocks.button_on_off={init:function(){this.appendDummyInput().appendField("When"),this.appendDummyInput(A).appendField(new d.a.FieldVariable(M,null,[A],A),A),this.appendDummyInput().appendField("is").appendField(new d.a.FieldDropdown([["Down","down"],["Up","up"],["Hold","hold"]]),"BUTTON_COMMAND"),this.appendStatementInput("BUTTON_STMT").setCheck(null),this.setColour(w),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.button_on_off=function(e){var t=e.getFieldValue("BUTTON_COMMAND"),n=d.a.JavaScript.statementToCode(e,"BUTTON_STMT"),a=d.a.JavaScript.variableDB_.getName(e.getFieldValue(A),d.a.Variables.NAME_TYPE);return"\n  ".concat(a,'.on("').concat(t,'", () => {\n    ').concat(n,"\n  });\n  ")};var R=[["#4","P1-7"],["#5","P1-29"],["#6","P1-31"],["#12","P1-32"],["#13","P1-33"],["#16","P1-36"],["#17","P1-11"],["#18","P1-12"],["#19","P1-35"],["#20","P1-38"],["#21","P1-40"],["#23","P1-16"],["#24","P1-18"],["#25","P1-22"],["#26","P1-37"],["#27","P1-13"]],G=(R.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(g.a)({},t[0],t[1]))}),{}),function(e){return"pin_".concat(e.replaceAll("#",""))}),L=R;L.forEach((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1],o=G(n);d.a.Blocks[o]={init:function(){this.appendDummyInput().appendField("Pin ".concat(n)),this.setOutput(!0,O),this.setColour(C.PIN),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript[o]=function(){return["'".concat(a,"'"),d.a.JavaScript.ORDER_ATOMIC]}}));var U=function(e){return"pin_PCF8591_".concat(e)},H=["A0","A1","A2","A3"],Y=function(e){var t=e.inputType,n=e.color;return{block:{setGenerator:function(e){var a=e.variableName,o=e.useText;return function(){this.appendDummyInput().appendField(o),this.appendDummyInput(t).appendField(new d.a.FieldVariable(a,null,[t],t),t),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(n),this.setTooltip(""),this.setHelpUrl("")}},getGenerator:function(e){var a=e.variableName;return function(){this.appendDummyInput().appendField(new d.a.FieldVariable(a,null,[t],t),t),this.setOutput(!0,t),this.setColour(n)}},useGenerator:function(e){var a=e.variableName,o=e.pinType;return function(){this.appendDummyInput().appendField("Use"),this.appendDummyInput(t).appendField(new d.a.FieldVariable(a,null,[t],t),t),this.appendDummyInput().appendField("with PIN"),this.appendValueInput(o).setCheck(o),this.appendStatementInput("".concat(t,"_STMT")).setCheck(null),this.setColour(n),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}}},code:{setGenerator:function(e){var n=e.expanderName;return function(e){var a=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return"".concat(a,' = new five.Board.Virtual(\n        new five.Expander("').concat(n,'")\n      );')}},getGenerator:function(){return function(e){return[d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE),d.a.JavaScript.ORDER_ATOMIC]}},useGenerator:function(e){var n=e.pinType;return function(e){var a=d.a.JavaScript.statementToCode(e,"".concat(t,"_STMT")),o=d.a.JavaScript.valueToCode(e,n,d.a.JavaScript.ORDER_ATOMIC),i=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return y(o)||y(i)?"":"(() => {\n        const additionalParams = {\n          pin: ".concat(o,",\n          board: ").concat(i,"\n          \n        };\n        ").concat(a,"\n      })();\n      ")}}}}},W=C.PCF8591,z="PCF9581 (ADC) Name",K="PIN_PCF8591";H.forEach((function(e){var t=U(e);d.a.Blocks[t]={init:function(){this.appendDummyInput().appendField("PCF8591 Pin ".concat(e)),this.setOutput(!0,K),this.setColour(W),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript[t]=function(){return["'".concat(e,"'"),d.a.JavaScript.ORDER_ATOMIC]}}));var X=Y({inputType:"PCF8591",color:W}),q=X.code,Q=X.block;d.a.Blocks.set_PCF8591={init:Q.setGenerator({useText:"Create PCF8591 (ADC) named:",variableName:z})},d.a.JavaScript.set_PCF8591=q.setGenerator({expanderName:"PCF8591"}),d.a.Blocks.get_PCF8591={init:Q.getGenerator({variableName:z})},d.a.JavaScript.get_PCF8591=q.getGenerator(),d.a.Blocks.use_PCF8591={init:Q.useGenerator({variableName:z,pinType:K})},d.a.JavaScript.use_PCF8591=q.useGenerator({pinType:K});var $=function(e){return e.reduce((function(e,t){var n,a=t,o=t.replace(/.*?_/,"");return Object(s.a)(Object(s.a)({},e),{},(n={},Object(g.a)(n,a,t),Object(g.a)(n,o,t),n))}),{})},Z=x,ee=C.SENSOR,te="Sensor Name",ne=function(e){return function(t){return"".concat(e,"_").concat(t)}}(Z),ae=[ne("set"),ne("on_change"),ne("get_value"),ne("get_scaled"),ne("get_fscaled"),ne("boolean_at"),ne("get_boolean"),ne("get_raw")],oe=$(ae),ie="THRESHOLD",re="FREQUENCY_IN_MS",le="custom options",ce=[["defaults","defaults"],[le,le]],se="gpio_yes",ue=[["No","gpio_no"],["Yes",se]],pe="customOptions",de="customGPIO",me="CUSTOM_OPTIONS_DUMMY_INPUT",be="PIN_INPUT",he=function(e){return"".concat(e,"_CUSTOM_OPTIONS")},fe=function(e){return"".concat(e,"_CUSTOM_GPIO")},ge=function(e){return e===le},je=function(e){return e===se};d.a.Blocks[oe.set]={init:function(){this.appendDummyInput().appendField("Create Sensor").appendField(new d.a.FieldVariable(te,null,[Z],Z),Z).appendField("with").appendField(new d.a.FieldDropdown(ce,this.validateCustomOptions),he(Z)),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(ee),this.setTooltip(""),this.setHelpUrl("")},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getFieldValue(he(Z));if(ge(t)){e.setAttribute(pe,t);var n=this.getFieldValue(fe(Z));je(n)&&e.setAttribute(de,n)}else e.setAttribute(pe,""),e.setAttribute(de,"");return e},domToMutation:function(e){var t=e.getAttribute(pe),n=e.getAttribute(de);this.updateShapeCustomOptionShape_(t),this.updateShapeGPIOShape_(n)},validateCustomOptions:function(e){return this.getSourceBlock().updateShapeCustomOptionShape_(e),e},validateGPIO:function(e){return this.getSourceBlock().updateShapeGPIOShape_(e),e},updateShapeCustomOptionShape_:function(e){var t=ge(e),n=this.getInput(me);if(t)n||(this.setInputsInline(!1),this.appendDummyInput(me).appendField(" Threshold:").appendField(new d.a.FieldNumber(1,1,1023),ie).appendField(" and Frequency:").appendField(new d.a.FieldNumber(25,1),re).appendField(" Use GPIO?").appendField(new d.a.FieldDropdown(ue,this.validateGPIO),fe(Z)));else if(n){this.removeInput(me);try{this.removeInput(be)}catch(a){console.log(a)}this.setInputsInline(!0)}},updateShapeGPIOShape_:function(e){var t=je(e),n=this.getInput(be);t?n||this.appendValueInput(be).setCheck(O).setAlign(d.a.ALIGN_RIGHT).appendField("GPIO Pin"):n&&this.removeInput(be)}},d.a.JavaScript[oe.set]=function(e){var t=d.a.JavaScript.variableDB_.getName(e.getFieldValue(Z),d.a.Variables.NAME_TYPE);if(y(te))return"";var n=e.getFieldValue(ie),a=e.getFieldValue(re),o=d.a.JavaScript.valueToCode(e,be,d.a.JavaScript.ORDER_ATOMIC),i={};y(n)||(i.threshold=n),y(a)||(i.freq=a),y(o)||(i.pin=o.replaceAll("'","")),console.log({args:i});var r="".concat(t,"__ARGS");return"\n      let ".concat(r," = ").concat(JSON.stringify(i),";\n      try {\n          ").concat(r," = {\n              ...additionalParams,\n              ...").concat(r,"\n          } ;\n      } catch(e) {} // do nothing\n  \n      ").concat(t," = new five.Sensor(").concat(r,");")};var ve="SENSOR_EVENT",Oe="SENSOR_ON_STATEMENT";d.a.Blocks[oe.on_change]={init:function(){this.appendDummyInput().appendField("When sensor: ").appendField(new d.a.FieldVariable(te,null,[Z],Z),Z),this.appendDummyInput().appendField(new d.a.FieldDropdown([["Changes","change"],["Gets any data","data"]]),ve),this.appendStatementInput(Oe).setCheck(null),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(ee)}},d.a.JavaScript[oe.on_change]=function(e){var t=e.getFieldValue(ve),n=e.getFieldValue(Z);if(y(t)||y(n))return"";var a=d.a.JavaScript.variableDB_.getName(n,d.a.Variables.NAME_TYPE),o=d.a.JavaScript.statementToCode(e,Oe);return console.log({sensorEvent:t,statementsMain:o}),"\n    ".concat(a,'.on("').concat(t,'", () => {\n      ').concat(o,"\n    });\n    ")};var _e=function(e,t){var n=e.getSurroundParent();for(console.group("hasSurroundedAncestor");null!=n&&(console.log({surroundParent:n,type:n.type,surroundAncestorType:t}),n.type!==t);)n=n.getSurroundParent();return console.groupEnd(),n},xe=function(e){e.setOutput(!0,x)},Ce=function(e){return[e,d.a.JavaScript.ORDER_ATOMIC]},ye=function(e){var t=e.inputType,n=e.color,a=e.ancestorBlockType;return{code:{get:function(e){var n=e.propertyName,o=e.fields,i=void 0===o?[]:o,r=e.codeWrapper,l=void 0===r?Ce:r;return function(){var e=l(""),o=_e(this,a);if(!!y(o))return e;var r=o.getFieldValue(t);if(console.log({sensorVariableNameFieldValue:r}),y(r))return e;for(var c=[],s=0;s<i.length;s+=1){var u=i[s].name,p=this.getFieldValue(u);if(y(p))return e;c.push(p)}var m=d.a.JavaScript.variableDB_.getName(r,d.a.Variables.NAME_TYPE);console.log({sensorVariableName:m,length:i.length});var b=0===i.length?n:"".concat(n,"(").concat(c.join(","),")"),h="".concat(m,".").concat(b),f=l(h);return console.log({result:f,updatedPropertyName:b,propertyName:n,fieldValues:c}),f}}},block:{get:function(e){var t=e.fieldText,o=e.fields,i=void 0===o?[]:o,r=e.additionalInitFunc,l=void 0===r?xe:r;return{init:function(){this.appendDummyInput().appendField(t);var e=this;i.forEach((function(t){var n=t.createField,a=t.name,o=t.text,i=n();e.appendDummyInput().appendField(o).appendField(i,a)})),l(this),this.setColour(n),this.setTooltip(""),this.setHelpUrl(""),this.setOnChange(this._onChange)},_onChange:function(e){if(!function(e){var t=e.type!==d.a.Events.BLOCK_MOVE,n=void 0===e.newParentId&&void 0!==e.oldParentId;return t||n}(e)){console.group("onChange");var t=_e(this,a),n=!y(t),o=this.getSurroundParent();console.log({event:e,hasSensorSurround:n,initialSurroundParent:o,type:e.type});var i=this.isEnabled();n||null==o?this.setEnabled(!0):(this.setEnabled(!1),i&&alert('This can only be under a "When Sensor" block.')),console.groupEnd()}}}}}}},Se=ne("on_change");console.log("-----======------"),console.log({ancestorBlockType:Se});var Ne=ye({inputType:Z,color:ee,ancestorBlockType:Se}),Fe=Ne.code,Ie=Ne.block;d.a.Blocks[oe.get_value]=Ie.get({fieldText:"Sensor value"}),d.a.JavaScript[oe.get_value]=Fe.get({propertyName:"value"});var Te=[{createField:function(){return new d.a.FieldNumber(0,0,1023)},name:"SCALE_FIELD_MIN",text:"minimum: "},{createField:function(){return new d.a.FieldNumber(1023,0,1023)},name:"SCALE_FIELD_MAX",text:"maximum: "}];d.a.Blocks[oe.get_scaled]=Ie.get({fieldText:"Scale sensor value ",fields:Te}),d.a.JavaScript[oe.get_scaled]=Fe.get({propertyName:"scaleTo",fields:Te});var Ee=[{createField:function(){return new d.a.FieldNumber(0,0,1023)},name:"FSCALE_FIELD_MIN",text:"minimum: "},{createField:function(){return new d.a.FieldNumber(1023,0,1023)},name:"FSCALE_FIELD_MAX",text:"maximum: "}];d.a.Blocks[oe.get_fscaled]=Ie.get({fieldText:"Scale sensor value to decimal",fields:Ee}),d.a.JavaScript[oe.get_fscaled]=Fe.get({propertyName:"fscaleTo",fields:Ee});var ke=[{createField:function(){return new d.a.FieldNumber(0,0,1023)},name:"BOOLEAN_AT",text:"boolean at: "}];d.a.Blocks[oe.boolean_at]=Ie.get({fieldText:"Set ",fields:ke,additionalInitFunc:function(e){e.setPreviousStatement(!0,null),e.setNextStatement(!0,null),e.setInputsInline(!0)}}),d.a.JavaScript[oe.boolean_at]=Fe.get({propertyName:"booleanAt",fields:ke,codeWrapper:function(e){return e}}),d.a.Blocks[oe.get_boolean]=Ie.get({fieldText:"Sensor boolean"}),d.a.JavaScript[oe.get_boolean]=Fe.get({propertyName:"boolean"}),d.a.Blocks[oe.get_raw]=Ie.get({fieldText:"Sensor raw value"}),d.a.JavaScript[oe.get_raw]=Fe.get({propertyName:"raw"});var Pe=n(251),De=n(254),Ae=n(252),we=n(236),Me=n(233),Be=n(120),Ve=n.n(Be),Je=ae.map((function(e){return{type:e}})),Re=L.map((function(e){var t=Object(c.a)(e,1)[0];return{type:G(t)}})),Ge=H.map((function(e){return{type:U(e)}})),Le=[{name:"Variables",custom:"VARIABLE",colour:"#a55b80"},{name:"Logic",colour:"#5C81A6",blocks:[{type:"controls_if"},{type:"logic_compare"},{type:"logic_operation"},{type:"logic_negate"},{type:"logic_boolean"},{type:"logic_null"},{type:"logic_ternary"}]},{name:"Math",colour:"#5CA65C",blocks:[{type:"math_number"},{type:"math_arithmetic"},{type:"math_single"},{type:"math_trig"},{type:"math_constant"},{type:"math_number_property"},{type:"math_round"},{type:"math_on_list"},{type:"math_modulo"},{type:"math_constrain"},{type:"math_random_int"},{type:"math_random_float"}]},{name:"Text",colour:"#5CA65C",blocks:[{type:"text"},{type:"text_print"},{type:"text_join"},{type:"text_append"},{type:"text_length"},{type:"text_isEmpty"},{type:"text_indexOf"},{type:"text_charAt"},{type:"text_getSubstring"},{type:"text_changeCase"},{type:"text_trim"}]},{name:"Loops",colour:"#5ba55b",blocks:[{type:"controls_repeat_ext"},{type:"controls_whileUntil"},{type:"controls_for"},{type:"controls_forEach"},{type:"controls_flow_statements"}]},{name:"Required",colour:"#5CA699",blocks:[{type:"board_setup"}]},{name:"Pins",colour:C.PIN,blocks:Re},{name:"LED",colour:C.LED,blocks:[{type:"set_led"},{type:"get_led"},{type:"led_on_off"}]},{name:"Button",colour:C.BUTTON,blocks:[{type:"set_button"},{type:"get_button"},{type:"button_on_off"}]},{name:"PCF9581 (ADC)",colour:C.PCF8591,blocks:[{type:"set_PCF8591"},{type:"get_PCF8591"},{type:"use_PCF8591"}].concat(Object(f.a)(Ge))},{name:"Sensor",colour:C.SENSOR,blocks:Object(f.a)(Je)},{name:"Lists",colour:"#745ba5",blocks:[{type:"lists_create_with"},{type:"lists_create_with"},{type:"lists_repeat"},{type:"lists_length"},{type:"lists_isEmpty"},{type:"lists_indexOf"},{type:"lists_getIndex"},{type:"lists_setIndex"},{type:"lists_getSublist"},{type:"lists_split"},{type:"lists_sort"}]}];console.log({toolboxCategories:Le});var Ue=Le,He=n(121),Ye=n.n(He),We=n(122),ze=n.n(We),Ke=function(e,t,n,a,o){n.current=e,!t.current&&e&&(console.group("initialization"),console.log("Initializing Workspace"),console.groupEnd());var i=d.a.Xml.domToText(d.a.Xml.workspaceToDom(e)),r=d.a.JavaScript.workspaceToCode(e),l="\n      const { RaspiIO } = require('raspi-io');\n      const five = require(\"johnny-five\");\n      const board = new five.Board({\n        io: new RaspiIO()\n      });\n    \n      ".concat(r).replaceAll("window.alert","console.log"),c=l;try{c=Ye.a.format(l,{parser:"babel",plugins:[ze.a]})}catch(s){console.group("Prettier Error"),console.error(s),console.groupEnd()}a===i&&t.current||(console.group("xml changed"),console.log("setting state"),console.groupEnd(),o({code:c,xml:i})),t.current=!0},Xe=L.reduce((function(e,t){var n=Object(c.a)(t,1)[0],a=G(n);return Object(s.a)(Object(s.a)({},e),{},Object(g.a)({},a,1))}),{}),qe=H.reduce((function(e,t){var n=U(t);return Object(s.a)(Object(s.a)({},e),{},Object(g.a)({},n,1))}),{}),Qe=Object(s.a)(Object(s.a)({},Xe),qe),$e=function(e){console.group("xml error"),console.error(e),console.groupEnd()},Ze=Object(Me.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),et=function(e){var t=e.toolboxState,n=e.handleToolboxChange;console.group("BlocklyToolbox");var i=t.xml,r=Object(o.useRef)(),l=Object(o.useRef)(!1);console.log({workspaceRef:r});var c=function(e){r.current&&d.a.Variables.createVariableButtonHandler(r.current,null,e)},s=Ze();return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsx)(we.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(j)},children:"Create LED"}),Object(a.jsx)(we.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(v)},children:"Create Button"}),Object(a.jsx)(we.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(_)},children:"Create PCF8591"}),Object(a.jsx)(we.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(x)},children:"Create Sensor"})]}),Object(a.jsx)(Ve.a,{ref:r,toolboxCategories:Ue,initialXml:i,wrapperDivClassName:"fill-height",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0},maxInstances:Qe},workspaceDidChange:function(e){return Ke(e,l,r,i,n)},onImportXmlError:$e,processToolboxCategory:function(e){return console.group("processToolboxCategory"),console.log({toolboxCategory:e}),console.groupEnd(),e}})]})},tt=n(6),nt=n(125),at=n.n(nt),ot=n(126),it=n.n(ot),rt=n(127),lt=n.n(rt),ct=n(238),st=n(239),ut=n(240),pt=n(256),dt=n(124),mt=n.n(dt),bt="".concat(window.location.hostname,":8080"),ht=mt.a.connect(bt,{reconnect:!0}),ft=i.a.createContext(),gt=function(e){var t=e.onClose,n=e.open,o=Object(u.a)(e,["onClose","open"]);return Object(a.jsxs)(pt.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},o),{},{children:[Object(a.jsx)(ct.a,{id:"confirmation-dialog-title",children:"Power Off?"}),Object(a.jsx)(st.a,{dividers:!0,children:"Are you sure you want to power off?"}),Object(a.jsxs)(ut.a,{children:[Object(a.jsx)(we.a,{autoFocus:!0,onClick:function(){t(!1)},color:"primary",children:"No"}),Object(a.jsx)(we.a,{onClick:function(){t(!0)},color:"primary",children:"yes"})]})]}))},jt=Object(tt.a)((function(e){return{root:{color:e.palette.getContrastText(e.palette.success.main),backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:e.palette.success.dark}}}}))(we.a),vt=function(e){var t=e.isProjectRunning,n=e.projectName,i=e.projectCode;console.group("Terminal");var r=Object(o.useState)(""),l=Object(c.a)(r,2),s=l[0],u=l[1],p=Object(o.useState)(""),d=Object(c.a)(p,2),m=d[0],b=d[1],h=Object(o.useRef)(null),f=Object(o.useState)(!1),g=Object(c.a)(f,2),j=g[0],v=g[1],O=Object(o.useContext)(ft);Object(o.useEffect)((function(){!function(){var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[s]),Object(o.useEffect)((function(){O.on("message",(function(e){console.group("on message");var t=String.fromCharCode.apply(null,new Uint8Array(e));console.log({buf:t}),u((function(e){return"".concat(e,'<p class="terminal">').concat(t,"</p>")})),console.groupEnd()})),O.on("exit",(function(e){console.group("on exit"),console.log({data:e}),console.groupEnd(),u((function(t){return"".concat(t,'<p class="terminal">').concat(e,"</p>")}))}))}),[O]);var _=Object(Me.a)((function(e){return{buttonBar:{"& > *":{margin:e.spacing(1)},width:"100%",position:"fixed"},terminalContainer:{paddingTop:"46px"},shutdown:{float:"right"}}}))();return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:_.buttonBar,children:[Object(a.jsx)(jt,{variant:"contained",size:"small",startIcon:Object(a.jsx)(at.a,{}),disabled:t||null==n||""===i,onClick:function(){console.group("handleRun"),console.log("emitting"),O.emit("copyProject",{projectCode:i}),setTimeout((function(){O.emit("message","sudo node /home/pi/Development/johnny-five/index.js"),O.emit("projectStarted")}),1e3),console.groupEnd()},children:"Play"}),Object(a.jsx)(we.a,{variant:"contained",color:"secondary",size:"small",startIcon:Object(a.jsx)(it.a,{}),disabled:!t,onClick:function(){console.group("handleStop"),console.log("emitting");O.emit("message",".exit"),setTimeout((function(){O.emit("stopProject")}),500),console.groupEnd()},children:"Stop"}),Object(a.jsx)(we.a,{variant:"contained",color:"secondary",size:"small",className:_.shutdown,startIcon:Object(a.jsx)(lt.a,{}),disabled:t,onClick:function(){return v(!0)},children:"Turn off"}),Object(a.jsx)(gt,{id:"power-off-dialog",keepMounted:!0,open:j,onClose:function(e){console.group("handleClose"),v(!1),e&&(console.log("emitting powerOff"),O.emit("powerOff")),console.groupEnd()}})]}),Object(a.jsxs)("div",{className:"terminal ".concat(_.terminalContainer),children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"terminal",dangerouslySetInnerHTML:{__html:s}}),Object(a.jsx)("div",{ref:h})]}),Object(a.jsxs)("form",{className:"terminal",onSubmit:function(e){console.group("handleSubmit"),console.log({value:m}),console.log("emitting"),O.emit("message",m),b(""),e.preventDefault(),console.groupEnd()},children:[">"," ",Object(a.jsx)("input",{className:"terminal",value:m,onChange:function(e){return b(e.target.value)}})]})]})]})},Ot=n(242),_t=n(249),xt=n(250),Ct=n(253),yt=n(248),St=n(243),Nt=n(257),Ft=n(244),It=n(245),Tt=n(128),Et=n.n(Tt),kt=n(246),Pt=n(247),Dt=n(129),At=n.n(Dt),wt=n(130),Mt=n.n(wt),Bt=function(e){var t=e.onClose,n=e.open,o=e.file,i=Object(u.a)(e,["onClose","open","file"]);return Object(a.jsxs)(pt.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},i),{},{children:[Object(a.jsx)(ct.a,{id:"confirmation-dialog-title",children:"Delete File?"}),Object(a.jsxs)(st.a,{dividers:!0,children:["Are you sure you want to delete ",o,"?"]}),Object(a.jsxs)(ut.a,{children:[Object(a.jsx)(we.a,{autoFocus:!0,onClick:function(){t(!1)},color:"primary",children:"Cancel"}),Object(a.jsx)(we.a,{onClick:function(){t(!0)},color:"secondary",children:"Delete"})]})]}))},Vt=n(241),Jt=function(e){var t=e.onClose,n=e.open,i=Object(u.a)(e,["onClose","open"]),r=Object(o.useState)(""),l=Object(c.a)(r,2),p=l[0],d=l[1];return Object(a.jsxs)(pt.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},i),{},{children:[Object(a.jsx)(ct.a,{id:"confirmation-dialog-title",children:"Delete File?"}),Object(a.jsxs)(st.a,{dividers:!0,children:[Object(a.jsx)(Vt.a,{children:"Enter the new project name to copy to"}),Object(a.jsx)(Ct.a,{autoFocus:!0,margin:"dense",id:"name",label:"New Project Name",type:"string",value:p,onChange:function(e){d(e.target.value)},fullWidth:!0})]}),Object(a.jsxs)(ut.a,{children:[Object(a.jsx)(we.a,{autoFocus:!0,onClick:function(){t(!1,p),d("")},color:"primary",children:"Cancel"}),Object(a.jsx)(we.a,{onClick:function(){t(!0,p),d("")},color:"secondary",disabled:""===p,children:"Copy"})]})]}))},Rt=function(e){var t=e.selectedIndex,n=e.file,i=e.index,r=e.handleListItemClick,l=e.handleDelete,s=e.handleCopy;console.group("ProjectListItem");var u=Object(o.useState)(!1),p=Object(c.a)(u,2),d=p[0],m=p[1],b=Object(o.useState)(!1),h=Object(c.a)(b,2),f=h[0],g=h[1],j=Object(o.useCallback)((function(e){console.group("handleConfirmDeleteDialogClose"),m(!1),e&&l(n),console.groupEnd()}),[n,l]),v=Object(o.useCallback)((function(e,t){console.group("handleCopyDialogClose"),g(!1),e&&s(n,"".concat(t,".xml")),console.groupEnd()}),[n,s]);return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(St.a,{button:!0,selected:t===i,onClick:function(e){return r(e,n)},children:[Object(a.jsx)(Ft.a,{children:Object(a.jsx)(Nt.a,{children:Object(a.jsx)(Et.a,{})})}),Object(a.jsx)(It.a,{primary:n}),Object(a.jsxs)(kt.a,{children:[Object(a.jsx)(Pt.a,{edge:"end","aria-label":"delete",onClick:function(){return m(!0)},children:Object(a.jsx)(At.a,{})}),Object(a.jsx)(Pt.a,{edge:"end","aria-label":"copy",onClick:function(){return g(!0)},children:Object(a.jsx)(Mt.a,{})})]})]}),Object(a.jsx)(Bt,{keepMounted:!0,open:d,file:n,onClose:j}),Object(a.jsx)(Jt,{keepMounted:!0,open:f,onClose:v})]})},Gt=Object(Me.a)((function(e){return{listRoot:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,marginLeft:"auto",marginRight:"auto"},root:{flexGrow:1,margin:e.spacing(1)},formRoot:{"& > *":{margin:e.spacing(1),width:"25ch"}}}})),Lt=function(e){var t=e.handleProjectNameSelection;console.group("ProjectManager");var n=Object(o.useContext)(ft),r=Object(o.useState)(null),l=Object(c.a)(r,2),s=l[0],u=l[1],p=Object(o.useState)(""),d=Object(c.a)(p,2),m=d[0],b=d[1],h=Object(o.useCallback)((function(e){console.group("handleDelete"),console.log("emitting deleteFile"),n.emit("deleteFile",{fileName:e}),console.groupEnd()}),[n]),f=Object(o.useCallback)((function(e,t){console.group("handleCopy"),console.log("emitting handleCopy"),n.emit("copyFile",{fileName:e,newFileName:t}),console.groupEnd()}),[n]),g=Gt(),j=i.a.useState(null),v=Object(c.a)(j,2),O=v[0],_=v[1],x=Object(o.useCallback)((function(e,n){console.group("handleListItemClick"),console.log({file:n}),console.groupEnd(),t(n),_(null)}),[t]),C=Object(o.useCallback)((function(e){b(e.target.value)}),[]);Object(o.useEffect)((function(){console.log("emit getFiles"),n.emit("getFiles"),n.on("files",(function(e){console.group("on files"),console.log({data:e}),console.groupEnd(),u(e)}))}),[n]);var y=null;return null!==s&&(y=s.map((function(e,t){return Object(a.jsx)(Rt,{file:e,index:t,selectedIndex:O,handleDelete:h,handleCopy:f,handleListItemClick:x},e)}))),console.groupEnd(),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:g.root,children:Object(a.jsxs)(yt.a,{container:!0,spacing:3,children:[Object(a.jsx)(yt.a,{item:!0,xs:6,children:Object(a.jsx)("div",{className:g.listRoot,children:null===y?Object(a.jsx)(_t.a,{}):Object(a.jsx)(Ot.a,{component:"nav","aria-label":"project files",subheader:Object(a.jsx)(xt.a,{component:"div",id:"nested-list-subheader",children:"Saved Projects"}),children:y})})}),Object(a.jsx)(yt.a,{item:!0,xs:6,children:Object(a.jsxs)("form",{className:g.formRoot,noValidate:!0,autoComplete:"off",children:[Object(a.jsx)(Ct.a,{id:"standard-basic",label:"New Project Name",value:m,onChange:C}),Object(a.jsx)(we.a,{variant:"contained",color:"primary",disabled:0===m.trim().length||null===y,onClick:function(){var e="".concat(m.trim(),".xml");t(e),b("")},children:"Create New Project"})]})})]})})})};function Ut(e){var t=e.children,n=e.value,o=e.index,i=Object(u.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(s.a)(Object(s.a)({role:"tabpanel",hidden:n!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o)},i),{},{children:t}))}var Ht='<xml xmlns="https://developers.google.com/blockly/xml"><block type="board_setup" id="{`$}^q8GM8vjCjK?)f5u" x="90" y="30"></block></xml>',Yt=function(){console.group("App");var e=Object(o.useState)({code:"",xml:Ht}),t=Object(c.a)(e,2),n=t[0],i=t[1],r=Object(o.useState)(0),l=Object(c.a)(r,2),s=l[0],u=l[1],p=Object(o.useState)(null),d=Object(c.a)(p,2),m=d[0],b=d[1],h=Object(o.useState)(!1),f=Object(c.a)(h,2),g=f[0],j=f[1],v=Object(o.useCallback)((function(e){b(e)}),[]),O=Object(o.useCallback)((function(e){var t=e.xml,n=e.code;i({xml:t,code:n}),null!==m&&ht.emit("saveFile",{contents:t,fileName:m})}),[m]);return Object(o.useEffect)((function(){null!==m&&(console.group("getFile Effect"),console.log({projectName:m}),console.groupEnd(),ht.emit("getFile",{fileName:m}))}),[m]),Object(o.useEffect)((function(){ht.on("connect",(function(){console.log("Client has connected to the server!")})),ht.on("file",(function(e){if(console.group("on file"),""===e)console.log("blank file"),i({code:"",xml:Ht});else{var t=String.fromCharCode.apply(null,new Uint8Array(e));console.log({buf:t}),i({code:"",xml:t})}u(1),console.groupEnd()})),ht.on("projectStatus",(function(e){console.group("on projectStatus"),console.log({status:e}),j(e),console.groupEnd()}))}),[]),console.groupEnd(),Object(a.jsxs)(ft.Provider,{value:ht,children:[Object(a.jsx)(Pe.a,{position:"static",children:Object(a.jsxs)(De.a,{value:s,onChange:function(e,t){u(t)},"aria-label":"Blockly Tabs",children:[Object(a.jsx)(Ae.a,{label:"Projects",disabled:g}),Object(a.jsx)(Ae.a,{label:"Blockly",disabled:null===m||g}),Object(a.jsx)(Ae.a,{label:"Code",disabled:null===m||g}),Object(a.jsx)(Ae.a,{label:"XML",disabled:null===m||g}),Object(a.jsx)(Ae.a,{label:"Run"})]})}),Object(a.jsx)(Ut,{value:s,index:0,children:Object(a.jsx)(Lt,{handleProjectNameSelection:v})}),Object(a.jsx)(Ut,{value:s,index:1,children:1===s&&Object(a.jsx)(et,{toolboxState:n,handleToolboxChange:O})}),Object(a.jsx)(Ut,{value:s,index:2,children:Object(a.jsx)("pre",{children:n.code})}),Object(a.jsx)(Ut,{value:s,index:3,children:Object(a.jsx)("pre",{id:"generated-xml",children:n.xml})}),Object(a.jsx)(Ut,{value:s,index:4,children:Object(a.jsx)(vt,{isProjectRunning:g,projectCode:n.code,projectName:m})})]})};l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Yt,{})}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.337eccc2.chunk.js.map