(this["webpackJsonpreact-pi-blocks-ui"]=this["webpackJsonpreact-pi-blocks-ui"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(3),o=n(0),i=n.n(o),r=n(11),l=n.n(r),c=(n(144),n(13)),s=n(12),u=n(34),p=(n(145),n(4)),d=n.n(p),b=n(23),m=n.n(b);d.a.Blocks.new_boundary_function={init:function(){this.appendDummyInput().appendField(new d.a.FieldTextInput("Boundary Function Name"),"Name"),this.appendStatementInput("Content").setCheck(null),this.setInputsInline(!0),this.setColour(315),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.new_boundary_function=function(e){return"def "+e.getFieldValue("Name")+"(_object,**kwargs):\n"+d.a.JavaScript.statementToCode(e,"Content")+"\n"},d.a.Blocks.return={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("return"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.return=function(e){return"return "+d.a.JavaScript.valueToCode(e,"NAME",d.a.Javascript.ORDER_ATOMIC)+"\n"},d.a.Blocks.board_setup={init:function(){this.appendDummyInput().appendField("Start"),this.setHelpUrl(""),this.setColour(50),this.appendStatementInput("MAIN").setCheck(null)}},d.a.JavaScript.board_setup=function(e){var t=d.a.JavaScript.statementToCode(e,"MAIN");return'\n  board.on("ready", () => {\n    '.concat(t,"\n  });\n  ")};var h,j=n(46),f=n(18),g="LED",O="BUTTON",v="PIN",C="PCF8591",_="SENSOR",x=(h={},Object(f.a)(h,g,"#6CB0F2"),Object(f.a)(h,O,"#6549DA"),Object(f.a)(h,v,"#9CDEF6"),Object(f.a)(h,C,"#FCA481"),Object(f.a)(h,_,"#123456"),h),y=function(e){return null===e||void 0===e||""===e};console.log({Blockly:d.a,jsBlockly:m.a});var S=function(e){var t=e.inputType,n=e.color,a=void 0===n?230:n;return{block:{setGenerator:function(e){var n=e.useText,o=e.variableName;return function(){this.appendDummyInput().appendField("Make Pin"),this.appendValueInput(v).setCheck(v),this.appendDummyInput().appendField(n),this.appendDummyInput(t).appendField(new d.a.FieldVariable(o,null,[t],t),t),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(a),this.setTooltip(""),this.setHelpUrl("")}},getGenerator:function(e){var n=e.variableName;return function(){this.appendDummyInput().appendField(new d.a.FieldVariable(n,null,[t],t),t),this.setOutput(!0,t),this.setColour(a)}},commandGenerator:function(e){var n=e.dropDownArray,o=e.variableName,i=e.validatorFunctionName,r=void 0===i?null:i;return function(){var e=null;if(null!=r){var i=this[r];i&&(e=i)}this.appendDummyInput().appendField("Make"),this.appendDummyInput(t).appendField(new d.a.FieldVariable(o,null,[t],t),t),this.appendDummyInput().appendField(new d.a.FieldDropdown(n,e),"".concat(t,"_COMMAND")),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(a),this.setTooltip(""),this.setHelpUrl("")}}},code:{setGenerator:function(e){var n=e.constructorName;return function(e){var a=d.a.JavaScript.valueToCode(e,v,d.a.JavaScript.ORDER_ATOMIC),o=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return y(a)||y(o)?"":"".concat(o," = new ").concat(n,"(").concat(a,");\n")}},getGenerator:function(){return function(e){return[d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE),d.a.JavaScript.ORDER_ATOMIC]}},commandGenerator:function(){return function(e){var n=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);if(y(n))return"";var a=e.getFieldValue("".concat(t,"_COMMAND"));return"".concat(n).concat(a,";\n")}}}}},I=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n][1])return!0;return!1},N=S({inputType:"LED",color:x.LED}),F=N.code,T=N.block,k="LED Name";d.a.Blocks.set_led={init:T.setGenerator({useText:"be used for LED named",variableName:k})},d.a.JavaScript.set_led=F.setGenerator({constructorName:"five.Led"}),d.a.Blocks.get_led={init:T.getGenerator({variableName:k})},d.a.JavaScript.get_led=F.getGenerator();var E,P={blink:{dropDownItem:"Blink",beforeText:"every",afterText:"milliseconds",fieldBlock:new d.a.FieldNumber(500,0),fieldName:"BLINK_TIME_IN_MS",codeGenerator:function(e){var t=d.a.JavaScript.valueToCode(e,"LED",d.a.JavaScript.ORDER_ATOMIC);if(y(t))return"";var n=d.a.JavaScript.variableDB_.getName(t,d.a.Variables.NAME_TYPE),a=e.getFieldValue("LED_COMMAND"),o=e.getFieldValue("BLINK_TIME_IN_MS");return"".concat(n,".").concat(a,"(").concat(o,");\n")}}},D=(E=P,Object.keys(E).reduce((function(e,t){return[].concat(Object(j.a)(e),[[E[t].dropDownItem,t]])}),[]));d.a.Blocks.led_on_off={init:T.commandGenerator({dropDownArray:[].concat([["Turn On",".on()"],["Turn Off",".off()"],["Start Pulsing",".pulse()"],["Stop Pulsing",".stop()"],["Fade In",".fadeIn()"],["Fade Out",".fadeOut()"]],Object(j.a)(D)),validatorFunctionName:"validate",variableName:k}),mutationToDom:function(){var e=document.createElement("mutation"),t=this.getFieldValue("LED_COMMAND");return I(t,D)?e.setAttribute("additionalParam",t):e.setAttribute("additionalParam",""),e},domToMutation:function(e){var t=e.getAttribute("additionalParam");this.updateShape_(t)},validate:function(e){return this.getSourceBlock().updateShape_(e),e},updateShape_:function(e){var t=I(e,D),n=this.getInput("ADDITIONAL_PARAM");if(t){if(!n){var a=P[e],o=a.beforeText,i=a.fieldBlock,r=a.fieldName,l=a.afterText;this.appendDummyInput("ADDITIONAL_PARAM").appendField(o).appendField(i,r).appendField(l)}}else n&&this.removeInput("ADDITIONAL_PARAM")}},d.a.JavaScript.led_on_off=function(e){var t=e.getFieldValue("LED_COMMAND");return I(t,D)?P[t].codeGenerator(e):F.commandGenerator()(e)};var A=O,w=x.BUTTON,M="Button Name",B=S({inputType:A,color:w}),V=B.code,J=B.block;d.a.Blocks.set_button={init:J.setGenerator({useText:"be used for Button named",variableName:M})},d.a.JavaScript.set_button=V.setGenerator({constructorName:"five.Button"}),d.a.Blocks.get_button={init:J.getGenerator({variableName:M})},d.a.JavaScript.get_button=V.getGenerator(),d.a.Blocks.button_on_off={init:function(){this.appendDummyInput().appendField("When"),this.appendDummyInput(A).appendField(new d.a.FieldVariable(M,null,[A],A),A),this.appendDummyInput().appendField("is").appendField(new d.a.FieldDropdown([["Down","down"],["Up","up"],["Hold","hold"]]),"BUTTON_COMMAND"),this.appendStatementInput("BUTTON_STMT").setCheck(null),this.setColour(w),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.button_on_off=function(e){var t=e.getFieldValue("BUTTON_COMMAND"),n=d.a.JavaScript.statementToCode(e,"BUTTON_STMT"),a=d.a.JavaScript.variableDB_.getName(e.getFieldValue(A),d.a.Variables.NAME_TYPE);return"\n  ".concat(a,'.on("').concat(t,'", () => {\n    ').concat(n,"\n  });\n  ")};var R=[["#4","P1-7"],["#5","P1-29"],["#6","P1-31"],["#12","P1-32"],["#13","P1-33"],["#16","P1-36"],["#17","P1-11"],["#18","P1-12"],["#19","P1-35"],["#20","P1-38"],["#21","P1-40"],["#23","P1-16"],["#24","P1-18"],["#25","P1-22"],["#26","P1-37"],["#27","P1-13"]],G=(R.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(f.a)({},t[0],t[1]))}),{}),function(e){return"pin_".concat(e.replaceAll("#",""))}),L=R;L.forEach((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1],o=G(n);d.a.Blocks[o]={init:function(){this.appendDummyInput().appendField("Pin ".concat(n)),this.setOutput(!0,v),this.setColour(x.PIN),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript[o]=function(){return["'".concat(a,"'"),d.a.JavaScript.ORDER_ATOMIC]}}));var U=function(e){return"pin_PCF8591_".concat(e)},H=["A0","A1","A2","A3"],Y=function(e){var t=e.inputType,n=e.color;return{block:{setGenerator:function(e){var a=e.variableName,o=e.useText;return function(){this.appendDummyInput().appendField(o),this.appendDummyInput(t).appendField(new d.a.FieldVariable(a,null,[t],t),t),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(n),this.setTooltip(""),this.setHelpUrl("")}},getGenerator:function(e){var a=e.variableName;return function(){this.appendDummyInput().appendField(new d.a.FieldVariable(a,null,[t],t),t),this.setOutput(!0,t),this.setColour(n)}},useGenerator:function(e){var a=e.variableName,o=e.pinType;return function(){this.appendDummyInput().appendField("Use"),this.appendDummyInput(t).appendField(new d.a.FieldVariable(a,null,[t],t),t),this.appendDummyInput().appendField("with PIN"),this.appendValueInput(o).setCheck(o),this.appendStatementInput("".concat(t,"_STMT")).setCheck(null),this.setColour(n),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}}},code:{setGenerator:function(e){var n=e.expanderName;return function(e){var a=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return"".concat(a,' = new five.Board.Virtual(\n        new five.Expander("').concat(n,'")\n      );')}},getGenerator:function(){return function(e){return[d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE),d.a.JavaScript.ORDER_ATOMIC]}},useGenerator:function(e){var n=e.pinType;return function(e){var a=d.a.JavaScript.statementToCode(e,"".concat(t,"_STMT")),o=d.a.JavaScript.valueToCode(e,n,d.a.JavaScript.ORDER_ATOMIC),i=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return y(o)||y(i)?"":"(() => {\n        const additionalParams = {\n          pin: ".concat(o,",\n          board: '").concat(i,"'\n          \n        };\n        ").concat(a,"\n      })();\n      ")}}}}},z=x.PCF8591,W="PCF9581 (ADC) Name",K="PIN_PCF8591";H.forEach((function(e){var t=U(e);d.a.Blocks[t]={init:function(){this.appendDummyInput().appendField("PCF8591 Pin ".concat(e)),this.setOutput(!0,K),this.setColour(z),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript[t]=function(){return["'".concat(e,"'"),d.a.JavaScript.ORDER_ATOMIC]}}));var q=Y({inputType:"PCF8591",color:z}),X=q.code,Q=q.block;d.a.Blocks.set_PCF8591={init:Q.setGenerator({useText:"Create PCF8591 (ADC) named:",variableName:W})},d.a.JavaScript.set_PCF8591=X.setGenerator({expanderName:"PCF8591"}),d.a.Blocks.get_PCF8591={init:Q.getGenerator({variableName:W})},d.a.JavaScript.get_PCF8591=X.getGenerator(),d.a.Blocks.use_PCF8591={init:Q.useGenerator({variableName:W,pinType:K})},d.a.JavaScript.use_PCF8591=X.useGenerator({pinType:K});var $=_,Z=x.SENSOR,ee="Sensor Name",te="THRESHOLD",ne="FREQUENCY_IN_MS",ae="custom options",oe=[["defaults","defaults"],[ae,ae]],ie="gpio_yes",re=[["No","gpio_no"],["Yes",ie]],le="customOptions",ce="customGPIO",se="CUSTOM_OPTIONS_DUMMY_INPUT",ue="PIN_INPUT",pe="SENSOR_EVENT",de="SENSOR_ON_STATEMENT",be=function(e){return"".concat(e,"_CUSTOM_OPTIONS")},me=function(e){return"".concat(e,"_CUSTOM_GPIO")},he=function(e){return e===ae},je=function(e){return e===ie},fe=["set_sensor","sensor_on","get_sensor_value"],ge=fe.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(f.a)({},t,t))}),{});d.a.Blocks[ge.set_sensor]={init:function(){this.appendDummyInput().appendField("Create Sensor").appendField(new d.a.FieldVariable(ee,null,[$],$),$).appendField("with").appendField(new d.a.FieldDropdown(oe,this.validateCustomOptions),be($)),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(Z),this.setTooltip(""),this.setHelpUrl("")},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getFieldValue(be($));if(he(t)){e.setAttribute(le,t);var n=this.getFieldValue(me($));je(n)&&e.setAttribute(ce,n)}else e.setAttribute(le,""),e.setAttribute(ce,"");return e},domToMutation:function(e){var t=e.getAttribute(le),n=e.getAttribute(ce);this.updateShapeCustomOptionShape_(t),this.updateShapeGPIOShape_(n)},validateCustomOptions:function(e){return this.getSourceBlock().updateShapeCustomOptionShape_(e),e},validateGPIO:function(e){return this.getSourceBlock().updateShapeGPIOShape_(e),e},updateShapeCustomOptionShape_:function(e){var t=he(e),n=this.getInput(se);if(t)n||(this.setInputsInline(!1),this.appendDummyInput(se).appendField(" Threshold:").appendField(new d.a.FieldNumber(1,1,1023),te).appendField(" and Frequency:").appendField(new d.a.FieldNumber(25,1),ne).appendField(" Use GPIO?").appendField(new d.a.FieldDropdown(re,this.validateGPIO),me($)));else if(n){this.removeInput(se);try{this.removeInput(ue)}catch(a){console.log(a)}this.setInputsInline(!0)}},updateShapeGPIOShape_:function(e){var t=je(e),n=this.getInput(ue);t?n||this.appendValueInput(ue).setCheck(v).setAlign(d.a.ALIGN_RIGHT).appendField("GPIO Pin"):n&&this.removeInput(ue)}},d.a.JavaScript[ge.set_sensor]=function(e){var t=d.a.JavaScript.variableDB_.getName(e.getFieldValue($),d.a.Variables.NAME_TYPE);if(y(ee))return"";var n=e.getFieldValue(te),a=e.getFieldValue(ne),o=d.a.JavaScript.valueToCode(e,ue,d.a.JavaScript.ORDER_ATOMIC),i={};y(n)||(i.threshold=n),y(a)||(i.freq=a),y(o)||(i.pin=o.replaceAll("'","")),console.log({args:i});var r="".concat(t,"__ARGS");return"\n    let ".concat(r," = ").concat(JSON.stringify(i),";\n    try {\n        ").concat(r," = {\n            ...additionalParams,\n            ...").concat(r,"\n        } ;\n    } catch(e) {} // do nothing\n\n    ").concat(t," = new five.Sensor(").concat(r,");")},d.a.Blocks[ge.sensor_on]={init:function(){this.appendDummyInput().appendField("When sensor: ").appendField(new d.a.FieldVariable(ee,null,[$],$),$),this.appendDummyInput().appendField(new d.a.FieldDropdown([["Changes","change"],["Gets any data","data"]]),pe),this.appendStatementInput(de).setCheck(null),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(Z)}},d.a.JavaScript[ge.sensor_on]=function(e){var t=e.getFieldValue(pe),n=d.a.JavaScript.statementToCode(e,de);console.log({sensorEvent:t,statementsMain:n});return""},d.a.Blocks[ge.get_sensor_value]={init:function(){this.appendDummyInput().appendField("Test"),this.setOutput(!0,_),this.setColour(x.SENSOR),this.setTooltip(""),this.setHelpUrl(""),this.setOnChange(this._onChange)},_onChange:function(e){if(!function(e){var t=e.type!==d.a.Events.BLOCK_MOVE,n=void 0===e.newParentId&&void 0!==e.oldParentId;return t||n}(e)){console.group("onChange");var t=!function(e){return null===e||void 0===e}(function(e,t){var n=e.getSurroundParent();for(console.group("hasSurroundedAncestor");null!=n&&(console.log({surroundParent:n}),n.type!==t);)n=n.getSurroundParent();return console.groupEnd(),n}(this,"sensor_on")),n=this.getSurroundParent();console.log({event:e,hasSensorSurround:t,initialSurroundParent:n,type:e.type});var a=this.isEnabled();t||null==n?this.setEnabled(!0):(this.setEnabled(!1),a&&alert('This can only be under a "When Sensor" block.')),console.groupEnd()}}},d.a.JavaScript[ge.get_sensor_value]=function(){return["",d.a.JavaScript.ORDER_ATOMIC]};var Oe=fe,ve=n(251),Ce=n(254),_e=n(252),xe=n(236),ye=n(233),Se=n(120),Ie=n.n(Se),Ne=Oe.map((function(e){return{type:e}})),Fe=L.map((function(e){var t=Object(c.a)(e,1)[0];return{type:G(t)}})),Te=H.map((function(e){return{type:U(e)}})),ke=[{name:"Variables",custom:"VARIABLE",colour:"#a55b80"},{name:"Logic",colour:"#5C81A6",blocks:[{type:"controls_if"},{type:"logic_compare"},{type:"logic_operation"},{type:"logic_negate"},{type:"logic_boolean"},{type:"logic_null"},{type:"logic_ternary"}]},{name:"Math",colour:"#5CA65C",blocks:[{type:"math_number"},{type:"math_arithmetic"},{type:"math_single"},{type:"math_trig"},{type:"math_constant"},{type:"math_number_property"},{type:"math_round"},{type:"math_on_list"},{type:"math_modulo"},{type:"math_constrain"},{type:"math_random_int"},{type:"math_random_float"}]},{name:"Text",colour:"#5CA65C",blocks:[{type:"text"},{type:"text_print"},{type:"text_join"},{type:"text_append"},{type:"text_length"},{type:"text_isEmpty"},{type:"text_indexOf"},{type:"text_charAt"},{type:"text_getSubstring"},{type:"text_changeCase"},{type:"text_trim"}]},{name:"Loops",colour:"#5ba55b",blocks:[{type:"controls_repeat_ext"},{type:"controls_whileUntil"},{type:"controls_for"},{type:"controls_forEach"},{type:"controls_flow_statements"}]},{name:"Required",colour:"#5CA699",blocks:[{type:"board_setup"}]},{name:"Pins",colour:x.PIN,blocks:Fe},{name:"LED",colour:x.LED,blocks:[{type:"set_led"},{type:"get_led"},{type:"led_on_off"}]},{name:"Button",colour:x.BUTTON,blocks:[{type:"set_button"},{type:"get_button"},{type:"button_on_off"}]},{name:"PCF9581 (ADC)",colour:x.PCF8591,blocks:[{type:"set_PCF8591"},{type:"get_PCF8591"},{type:"use_PCF8591"}].concat(Object(j.a)(Te))},{name:"Sensor",colour:x.SENSOR,blocks:Object(j.a)(Ne)},{name:"Lists",colour:"#745ba5",blocks:[{type:"lists_create_with"},{type:"lists_create_with"},{type:"lists_repeat"},{type:"lists_length"},{type:"lists_isEmpty"},{type:"lists_indexOf"},{type:"lists_getIndex"},{type:"lists_setIndex"},{type:"lists_getSublist"},{type:"lists_split"},{type:"lists_sort"}]}];console.log({toolboxCategories:ke});var Ee=ke,Pe=n(121),De=n.n(Pe),Ae=n(122),we=n.n(Ae),Me=function(e,t,n,a,o){n.current=e,!t.current&&e&&(console.group("initialization"),console.log("Initializing Workspace"),console.groupEnd());var i=d.a.Xml.domToText(d.a.Xml.workspaceToDom(e)),r=d.a.JavaScript.workspaceToCode(e),l="\n      const { RaspiIO } = require('raspi-io');\n      const five = require(\"johnny-five\");\n      const board = new five.Board({\n        io: new RaspiIO()\n      });\n    \n      ".concat(r).replaceAll("window.alert","console.log"),c=l;try{c=De.a.format(l,{parser:"babel",plugins:[we.a]})}catch(s){console.group("Prettier Error"),console.error(s),console.groupEnd()}a===i&&t.current||(console.group("xml changed"),console.log("setting state"),console.groupEnd(),o({code:c,xml:i})),t.current=!0},Be=L.reduce((function(e,t){var n=Object(c.a)(t,1)[0],a=G(n);return Object(s.a)(Object(s.a)({},e),{},Object(f.a)({},a,1))}),{}),Ve=H.reduce((function(e,t){var n=U(t);return Object(s.a)(Object(s.a)({},e),{},Object(f.a)({},n,1))}),{}),Je=Object(s.a)(Object(s.a)({},Be),Ve),Re=function(e){console.group("xml error"),console.error(e),console.groupEnd()},Ge=Object(ye.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),Le=function(e){var t=e.toolboxState,n=e.handleToolboxChange;console.group("BlocklyToolbox");var i=t.xml,r=Object(o.useRef)(),l=Object(o.useRef)(!1);console.log({workspaceRef:r});var c=function(e){r.current&&d.a.Variables.createVariableButtonHandler(r.current,null,e)},s=Ge();return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsx)(xe.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(g)},children:"Create LED"}),Object(a.jsx)(xe.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(O)},children:"Create Button"}),Object(a.jsx)(xe.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(C)},children:"Create PCF8591"}),Object(a.jsx)(xe.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(_)},children:"Create Sensor"})]}),Object(a.jsx)(Ie.a,{ref:r,toolboxCategories:Ee,initialXml:i,wrapperDivClassName:"fill-height",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0},maxInstances:Je},workspaceDidChange:function(e){return Me(e,l,r,i,n)},onImportXmlError:Re,processToolboxCategory:function(e){return console.group("processToolboxCategory"),console.log({toolboxCategory:e}),console.groupEnd(),e}})]})},Ue=n(6),He=n(125),Ye=n.n(He),ze=n(126),We=n.n(ze),Ke=n(127),qe=n.n(Ke),Xe=n(238),Qe=n(239),$e=n(240),Ze=n(256),et=n(124),tt=n.n(et),nt="".concat(window.location.hostname,":8080"),at=tt.a.connect(nt,{reconnect:!0}),ot=i.a.createContext(),it=function(e){var t=e.onClose,n=e.open,o=Object(u.a)(e,["onClose","open"]);return Object(a.jsxs)(Ze.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},o),{},{children:[Object(a.jsx)(Xe.a,{id:"confirmation-dialog-title",children:"Power Off?"}),Object(a.jsx)(Qe.a,{dividers:!0,children:"Are you sure you want to power off?"}),Object(a.jsxs)($e.a,{children:[Object(a.jsx)(xe.a,{autoFocus:!0,onClick:function(){t(!1)},color:"primary",children:"No"}),Object(a.jsx)(xe.a,{onClick:function(){t(!0)},color:"primary",children:"yes"})]})]}))},rt=Object(Ue.a)((function(e){return{root:{color:e.palette.getContrastText(e.palette.success.main),backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:e.palette.success.dark}}}}))(xe.a),lt=function(e){var t=e.isProjectRunning,n=e.projectName,i=e.projectCode;console.group("Terminal");var r=Object(o.useState)(""),l=Object(c.a)(r,2),s=l[0],u=l[1],p=Object(o.useState)(""),d=Object(c.a)(p,2),b=d[0],m=d[1],h=Object(o.useRef)(null),j=Object(o.useState)(!1),f=Object(c.a)(j,2),g=f[0],O=f[1],v=Object(o.useContext)(ot);Object(o.useEffect)((function(){!function(){var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[s]),Object(o.useEffect)((function(){v.on("message",(function(e){console.group("on message");var t=String.fromCharCode.apply(null,new Uint8Array(e));console.log({buf:t}),u((function(e){return"".concat(e,'<p class="terminal">').concat(t,"</p>")})),console.groupEnd()})),v.on("exit",(function(e){console.group("on exit"),console.log({data:e}),console.groupEnd(),u((function(t){return"".concat(t,'<p class="terminal">').concat(e,"</p>")}))}))}),[v]);var C=Object(ye.a)((function(e){return{buttonBar:{"& > *":{margin:e.spacing(1)},width:"100%",position:"fixed"},terminalContainer:{paddingTop:"46px"},shutdown:{float:"right"}}}))();return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:C.buttonBar,children:[Object(a.jsx)(rt,{variant:"contained",size:"small",startIcon:Object(a.jsx)(Ye.a,{}),disabled:t||null==n||""===i,onClick:function(){console.group("handleRun"),console.log("emitting"),v.emit("copyProject",{projectCode:i}),setTimeout((function(){v.emit("message","sudo node /home/pi/Development/johnny-five/index.js"),v.emit("projectStarted")}),1e3),console.groupEnd()},children:"Play"}),Object(a.jsx)(xe.a,{variant:"contained",color:"secondary",size:"small",startIcon:Object(a.jsx)(We.a,{}),disabled:!t,onClick:function(){console.group("handleStop"),console.log("emitting");v.emit("message",".exit"),setTimeout((function(){v.emit("stopProject")}),500),console.groupEnd()},children:"Stop"}),Object(a.jsx)(xe.a,{variant:"contained",color:"secondary",size:"small",className:C.shutdown,startIcon:Object(a.jsx)(qe.a,{}),disabled:t,onClick:function(){return O(!0)},children:"Turn off"}),Object(a.jsx)(it,{id:"power-off-dialog",keepMounted:!0,open:g,onClose:function(e){console.group("handleClose"),O(!1),e&&(console.log("emitting powerOff"),v.emit("powerOff")),console.groupEnd()}})]}),Object(a.jsxs)("div",{className:"terminal ".concat(C.terminalContainer),children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"terminal",dangerouslySetInnerHTML:{__html:s}}),Object(a.jsx)("div",{ref:h})]}),Object(a.jsxs)("form",{className:"terminal",onSubmit:function(e){console.group("handleSubmit"),console.log({value:b}),console.log("emitting"),v.emit("message",b),m(""),e.preventDefault(),console.groupEnd()},children:[">"," ",Object(a.jsx)("input",{className:"terminal",value:b,onChange:function(e){return m(e.target.value)}})]})]})]})},ct=n(242),st=n(249),ut=n(250),pt=n(253),dt=n(248),bt=n(243),mt=n(257),ht=n(244),jt=n(245),ft=n(128),gt=n.n(ft),Ot=n(246),vt=n(247),Ct=n(129),_t=n.n(Ct),xt=n(130),yt=n.n(xt),St=function(e){var t=e.onClose,n=e.open,o=e.file,i=Object(u.a)(e,["onClose","open","file"]);return Object(a.jsxs)(Ze.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},i),{},{children:[Object(a.jsx)(Xe.a,{id:"confirmation-dialog-title",children:"Delete File?"}),Object(a.jsxs)(Qe.a,{dividers:!0,children:["Are you sure you want to delete ",o,"?"]}),Object(a.jsxs)($e.a,{children:[Object(a.jsx)(xe.a,{autoFocus:!0,onClick:function(){t(!1)},color:"primary",children:"Cancel"}),Object(a.jsx)(xe.a,{onClick:function(){t(!0)},color:"secondary",children:"Delete"})]})]}))},It=n(241),Nt=function(e){var t=e.onClose,n=e.open,i=Object(u.a)(e,["onClose","open"]),r=Object(o.useState)(""),l=Object(c.a)(r,2),p=l[0],d=l[1];return Object(a.jsxs)(Ze.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},i),{},{children:[Object(a.jsx)(Xe.a,{id:"confirmation-dialog-title",children:"Delete File?"}),Object(a.jsxs)(Qe.a,{dividers:!0,children:[Object(a.jsx)(It.a,{children:"Enter the new project name to copy to"}),Object(a.jsx)(pt.a,{autoFocus:!0,margin:"dense",id:"name",label:"New Project Name",type:"string",value:p,onChange:function(e){d(e.target.value)},fullWidth:!0})]}),Object(a.jsxs)($e.a,{children:[Object(a.jsx)(xe.a,{autoFocus:!0,onClick:function(){t(!1,p),d("")},color:"primary",children:"Cancel"}),Object(a.jsx)(xe.a,{onClick:function(){t(!0,p),d("")},color:"secondary",disabled:""===p,children:"Copy"})]})]}))},Ft=function(e){var t=e.selectedIndex,n=e.file,i=e.index,r=e.handleListItemClick,l=e.handleDelete,s=e.handleCopy;console.group("ProjectListItem");var u=Object(o.useState)(!1),p=Object(c.a)(u,2),d=p[0],b=p[1],m=Object(o.useState)(!1),h=Object(c.a)(m,2),j=h[0],f=h[1],g=Object(o.useCallback)((function(e){console.group("handleConfirmDeleteDialogClose"),b(!1),e&&l(n),console.groupEnd()}),[n,l]),O=Object(o.useCallback)((function(e,t){console.group("handleCopyDialogClose"),f(!1),e&&s(n,"".concat(t,".xml")),console.groupEnd()}),[n,s]);return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(bt.a,{button:!0,selected:t===i,onClick:function(e){return r(e,n)},children:[Object(a.jsx)(ht.a,{children:Object(a.jsx)(mt.a,{children:Object(a.jsx)(gt.a,{})})}),Object(a.jsx)(jt.a,{primary:n}),Object(a.jsxs)(Ot.a,{children:[Object(a.jsx)(vt.a,{edge:"end","aria-label":"delete",onClick:function(){return b(!0)},children:Object(a.jsx)(_t.a,{})}),Object(a.jsx)(vt.a,{edge:"end","aria-label":"copy",onClick:function(){return f(!0)},children:Object(a.jsx)(yt.a,{})})]})]}),Object(a.jsx)(St,{keepMounted:!0,open:d,file:n,onClose:g}),Object(a.jsx)(Nt,{keepMounted:!0,open:j,onClose:O})]})},Tt=Object(ye.a)((function(e){return{listRoot:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,marginLeft:"auto",marginRight:"auto"},root:{flexGrow:1,margin:e.spacing(1)},formRoot:{"& > *":{margin:e.spacing(1),width:"25ch"}}}})),kt=function(e){var t=e.handleProjectNameSelection;console.group("ProjectManager");var n=Object(o.useContext)(ot),r=Object(o.useState)(null),l=Object(c.a)(r,2),s=l[0],u=l[1],p=Object(o.useState)(""),d=Object(c.a)(p,2),b=d[0],m=d[1],h=Object(o.useCallback)((function(e){console.group("handleDelete"),console.log("emitting deleteFile"),n.emit("deleteFile",{fileName:e}),console.groupEnd()}),[n]),j=Object(o.useCallback)((function(e,t){console.group("handleCopy"),console.log("emitting handleCopy"),n.emit("copyFile",{fileName:e,newFileName:t}),console.groupEnd()}),[n]),f=Tt(),g=i.a.useState(null),O=Object(c.a)(g,2),v=O[0],C=O[1],_=Object(o.useCallback)((function(e,n){console.group("handleListItemClick"),console.log({file:n}),console.groupEnd(),t(n),C(null)}),[t]),x=Object(o.useCallback)((function(e){m(e.target.value)}),[]);Object(o.useEffect)((function(){console.log("emit getFiles"),n.emit("getFiles"),n.on("files",(function(e){console.group("on files"),console.log({data:e}),console.groupEnd(),u(e)}))}),[n]);var y=null;return null!==s&&(y=s.map((function(e,t){return Object(a.jsx)(Ft,{file:e,index:t,selectedIndex:v,handleDelete:h,handleCopy:j,handleListItemClick:_},e)}))),console.groupEnd(),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:f.root,children:Object(a.jsxs)(dt.a,{container:!0,spacing:3,children:[Object(a.jsx)(dt.a,{item:!0,xs:6,children:Object(a.jsx)("div",{className:f.listRoot,children:null===y?Object(a.jsx)(st.a,{}):Object(a.jsx)(ct.a,{component:"nav","aria-label":"project files",subheader:Object(a.jsx)(ut.a,{component:"div",id:"nested-list-subheader",children:"Saved Projects"}),children:y})})}),Object(a.jsx)(dt.a,{item:!0,xs:6,children:Object(a.jsxs)("form",{className:f.formRoot,noValidate:!0,autoComplete:"off",children:[Object(a.jsx)(pt.a,{id:"standard-basic",label:"New Project Name",value:b,onChange:x}),Object(a.jsx)(xe.a,{variant:"contained",color:"primary",disabled:0===b.trim().length||null===y,onClick:function(){var e="".concat(b.trim(),".xml");t(e),m("")},children:"Create New Project"})]})})]})})})};function Et(e){var t=e.children,n=e.value,o=e.index,i=Object(u.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(s.a)(Object(s.a)({role:"tabpanel",hidden:n!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o)},i),{},{children:t}))}var Pt='<xml xmlns="https://developers.google.com/blockly/xml"><block type="board_setup" id="{`$}^q8GM8vjCjK?)f5u" x="90" y="30"></block></xml>',Dt=function(){console.group("App");var e=Object(o.useState)({code:"",xml:Pt}),t=Object(c.a)(e,2),n=t[0],i=t[1],r=Object(o.useState)(0),l=Object(c.a)(r,2),s=l[0],u=l[1],p=Object(o.useState)(null),d=Object(c.a)(p,2),b=d[0],m=d[1],h=Object(o.useState)(!1),j=Object(c.a)(h,2),f=j[0],g=j[1],O=Object(o.useCallback)((function(e){m(e)}),[]),v=Object(o.useCallback)((function(e){var t=e.xml,n=e.code;i({xml:t,code:n}),null!==b&&at.emit("saveFile",{contents:t,fileName:b})}),[b]);return Object(o.useEffect)((function(){null!==b&&(console.group("getFile Effect"),console.log({projectName:b}),console.groupEnd(),at.emit("getFile",{fileName:b}))}),[b]),Object(o.useEffect)((function(){at.on("connect",(function(){console.log("Client has connected to the server!")})),at.on("file",(function(e){if(console.group("on file"),""===e)console.log("blank file"),i({code:"",xml:Pt});else{var t=String.fromCharCode.apply(null,new Uint8Array(e));console.log({buf:t}),i({code:"",xml:t})}u(1),console.groupEnd()})),at.on("projectStatus",(function(e){console.group("on projectStatus"),console.log({status:e}),g(e),console.groupEnd()}))}),[]),console.groupEnd(),Object(a.jsxs)(ot.Provider,{value:at,children:[Object(a.jsx)(ve.a,{position:"static",children:Object(a.jsxs)(Ce.a,{value:s,onChange:function(e,t){u(t)},"aria-label":"Blockly Tabs",children:[Object(a.jsx)(_e.a,{label:"Projects",disabled:f}),Object(a.jsx)(_e.a,{label:"Blockly",disabled:null===b||f}),Object(a.jsx)(_e.a,{label:"Code",disabled:null===b||f}),Object(a.jsx)(_e.a,{label:"XML",disabled:null===b||f}),Object(a.jsx)(_e.a,{label:"Run"})]})}),Object(a.jsx)(Et,{value:s,index:0,children:Object(a.jsx)(kt,{handleProjectNameSelection:O})}),Object(a.jsx)(Et,{value:s,index:1,children:1===s&&Object(a.jsx)(Le,{toolboxState:n,handleToolboxChange:v})}),Object(a.jsx)(Et,{value:s,index:2,children:Object(a.jsx)("pre",{children:n.code})}),Object(a.jsx)(Et,{value:s,index:3,children:Object(a.jsx)("pre",{id:"generated-xml",children:n.xml})}),Object(a.jsx)(Et,{value:s,index:4,children:Object(a.jsx)(lt,{isProjectRunning:f,projectCode:n.code,projectName:b})})]})};l.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Dt,{})}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.36801166.chunk.js.map