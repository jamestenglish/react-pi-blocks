(this["webpackJsonpreact-pi-blocks-ui"]=this["webpackJsonpreact-pi-blocks-ui"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var o=n(3),a=n(0),l=n.n(a),c=n(11),i=n.n(c),r=(n(144),n(12)),s=n(15),u=n(34),p=(n(145),n(6)),d=n.n(p),b=n(29),m=n.n(b);d.a.Blocks.new_boundary_function={init:function(){this.appendDummyInput().appendField(new d.a.FieldTextInput("Boundary Function Name"),"Name"),this.appendStatementInput("Content").setCheck(null),this.setInputsInline(!0),this.setColour(315),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.new_boundary_function=function(e){return"def "+e.getFieldValue("Name")+"(_object,**kwargs):\n"+d.a.JavaScript.statementToCode(e,"Content")+"\n"},d.a.Blocks.return={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("return"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.return=function(e){return"return "+d.a.JavaScript.valueToCode(e,"NAME",d.a.Javascript.ORDER_ATOMIC)+"\n"},d.a.Blocks.board_setup={init:function(){this.appendDummyInput().appendField("Start"),this.setHelpUrl(""),this.setColour(50),this.appendStatementInput("MAIN").setCheck(null)}},d.a.JavaScript.board_setup=function(e){var t=d.a.JavaScript.statementToCode(e,"MAIN");return'\n  board.on("ready", () => {\n    '.concat(t,"\n  });\n  ")};var j,f=n(87),h=n(26),g="LED",O="BUTTON",x="PIN",v=(j={},Object(h.a)(j,g,"#6CB0F2"),Object(h.a)(j,O,"#6549DA"),Object(h.a)(j,x,"#9CDEF6"),j),C=function(e){return null===e||void 0===e||""===e};console.log({Blockly:d.a,jsBlockly:m.a});var y=function(e){var t=e.inputType,n=e.color,o=void 0===n?230:n;return{pinVariableBlockSetGenerator:function(e){var n=e.useText,a=e.variableName;return function(){this.appendDummyInput().appendField("Make Pin"),this.appendValueInput(x).setCheck(x),this.appendDummyInput().appendField(n),this.appendDummyInput(t).appendField(new d.a.FieldVariable(a,null,[t],t),t),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(o),this.setTooltip(""),this.setHelpUrl("")}},pinVariableCodeSetGenerator:function(e){var n=e.constructorName;return function(e){var o=d.a.JavaScript.valueToCode(e,x,d.a.JavaScript.ORDER_ATOMIC),a=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return C(o)||C(a)?"":"".concat(a," = new ").concat(n,"(").concat(o,");\n")}},pinVariableBlockGetGenerator:function(e){var n=e.variableName;return function(){this.appendDummyInput().appendField(new d.a.FieldVariable(n,null,[t],t),t),this.setOutput(!0,t),this.setColour(o)}},pinVariableCodeGetGenerator:function(){return function(e){return[d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE),d.a.JavaScript.ORDER_ATOMIC]}},commandBlockGenerator:function(e){var n=e.dropDownArray,a=e.variableName,l=e.validatorFunctionName,c=void 0===l?null:l;return function(){var e=null;if(null!=c){var l=this[c];l&&(e=l)}this.appendDummyInput().appendField("Make"),this.appendDummyInput(t).appendField(new d.a.FieldVariable(a,null,[t],t),t),this.appendDummyInput().appendField(new d.a.FieldDropdown(n,e),"".concat(t,"_COMMAND")),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(o),this.setTooltip(""),this.setHelpUrl("")}},commandCodeGenerator:function(){return function(e){var n=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);if(C(n))return"";var o=e.getFieldValue("".concat(t,"_COMMAND"));return"".concat(n).concat(o,";\n")}}}},_=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n][1])return!0;return!1},k=y({inputType:"LED",color:v.LED}),N=k.pinVariableBlockSetGenerator,S=k.pinVariableCodeSetGenerator,T=k.pinVariableBlockGetGenerator,I=k.pinVariableCodeGetGenerator,D=k.commandBlockGenerator,E=k.commandCodeGenerator,F="LED Name";d.a.Blocks.set_led={init:N({useText:"be used for LED named",variableName:F})},d.a.JavaScript.set_led=S({constructorName:"five.Led"}),d.a.Blocks.get_led={init:T({variableName:F})},d.a.JavaScript.get_led=I();var w,B={blink:{dropDownItem:"Blink",beforeText:"every",afterText:"milliseconds",fieldBlock:new d.a.FieldNumber(500,0),fieldName:"BLINK_TIME_IN_MS",codeGenerator:function(e){var t=d.a.JavaScript.valueToCode(e,"LED",d.a.JavaScript.ORDER_ATOMIC);if(C(t))return"";var n=d.a.JavaScript.variableDB_.getName(t,d.a.Variables.NAME_TYPE),o=e.getFieldValue("LED_COMMAND"),a=e.getFieldValue("BLINK_TIME_IN_MS");return"".concat(n,".").concat(o,"(").concat(a,");\n")}}},P=(w=B,Object.keys(w).reduce((function(e,t){return[].concat(Object(f.a)(e),[[w[t].dropDownItem,t]])}),[]));d.a.Blocks.led_on_off={init:D({dropDownArray:[].concat([["Turn On",".on()"],["Turn Off",".off()"],["Start Pulsing",".pulse()"],["Stop Pulsing",".stop()"],["Fade In",".fadeIn()"],["Fade Out",".fadeOut()"]],Object(f.a)(P)),validatorFunctionName:"validate",variableName:F}),mutationToDom:function(){var e=document.createElement("mutation"),t=this.getFieldValue("LED_COMMAND");return _(t,P)?e.setAttribute("additionalParam",t):e.setAttribute("additionalParam",""),e},domToMutation:function(e){var t=e.getAttribute("additionalParam");this.updateShape_(t)},validate:function(e){return this.getSourceBlock().updateShape_(e),e},updateShape_:function(e){var t=_(e,P),n=this.getInput("ADDITIONAL_PARAM");if(t){if(!n){var o=B[e],a=o.beforeText,l=o.fieldBlock,c=o.fieldName,i=o.afterText;this.appendDummyInput("ADDITIONAL_PARAM").appendField(a).appendField(l,c).appendField(i)}}else n&&this.removeInput("ADDITIONAL_PARAM")}},d.a.JavaScript.led_on_off=function(e){var t=e.getFieldValue("LED_COMMAND");return _(t,P)?B[t].codeGenerator(e):E()(e)};var A=O,M=v.BUTTON,V=y({inputType:A,color:M}),R=V.pinVariableBlockSetGenerator,J=V.pinVariableCodeSetGenerator,L=V.pinVariableBlockGetGenerator,G=V.pinVariableCodeGetGenerator,U="Button Name";d.a.Blocks.set_button={init:R({useText:"be used for Button named",variableName:U})},d.a.JavaScript.set_button=J({constructorName:"five.Button"}),d.a.Blocks.get_button={init:L({variableName:U})},d.a.JavaScript.get_button=G(),d.a.Blocks.button_on_off={init:function(){this.appendDummyInput().appendField("When"),this.appendDummyInput(A).appendField(new d.a.FieldVariable(U,null,[A],A),A),this.appendDummyInput().appendField("is").appendField(new d.a.FieldDropdown([["Down","down"],["Up","up"],["Hold","hold"]]),"BUTTON_COMMAND"),this.appendStatementInput("BUTTON_STMT").setCheck(null),this.setColour(M),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.button_on_off=function(e){var t=e.getFieldValue("BUTTON_COMMAND"),n=d.a.JavaScript.statementToCode(e,"BUTTON_STMT"),o=d.a.JavaScript.variableDB_.getName(e.getFieldValue(A),d.a.Variables.NAME_TYPE);return"\n  ".concat(o,'.on("').concat(t,'", () => {\n    ').concat(n,"\n  });\n  ")};var H=[["#4","P1-7"],["#5","P1-29"],["#6","P1-31"],["#12","P1-32"],["#13","P1-33"],["#16","P1-36"],["#17","P1-11"],["#18","P1-12"],["#19","P1-35"],["#20","P1-38"],["#21","P1-40"],["#23","P1-16"],["#24","P1-18"],["#25","P1-22"],["#26","P1-37"],["#27","P1-13"]],z=(H.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(h.a)({},t[0],t[1]))}),{}),H);z.forEach((function(e){var t=Object(r.a)(e,2),n=t[0],o=t[1],a="pin_".concat(n.replaceAll("#",""));d.a.Blocks[a]={init:function(){this.appendDummyInput().appendField("Pin ".concat(n)),this.setOutput(!0,x),this.setColour(v.PIN),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript[a]=function(){return["'".concat(o,"'"),d.a.JavaScript.ORDER_ATOMIC]}})),d.a.Blocks.pin_a={init:function(){this.appendDummyInput().appendField("Pin"),this.setOutput(!0,x),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.pin_a=function(){return["'pin_a'",d.a.JavaScript.ORDER_ATOMIC]};var W=n(251),K=n(254),X=n(252),Y=n(236),q=n(233),$=n(120),Q=n.n($),Z=z.map((function(e){var t=Object(r.a)(e,1)[0];return{type:"pin_".concat(t.replaceAll("#",""))}})),ee=[{name:"Variables",custom:"VARIABLE",colour:"#a55b80"},{name:"Logic",colour:"#5C81A6",blocks:[{type:"controls_if"},{type:"logic_compare"},{type:"logic_operation"},{type:"logic_negate"},{type:"logic_boolean"},{type:"logic_null"},{type:"logic_ternary"}]},{name:"Math",colour:"#5CA65C",blocks:[{type:"math_number"},{type:"math_arithmetic"},{type:"math_single"},{type:"math_trig"},{type:"math_constant"},{type:"math_number_property"},{type:"math_round"},{type:"math_on_list"},{type:"math_modulo"},{type:"math_constrain"},{type:"math_random_int"},{type:"math_random_float"}]},{name:"Text",colour:"#5CA65C",blocks:[{type:"text"},{type:"text_join"},{type:"text_append"},{type:"text_length"},{type:"text_isEmpty"},{type:"text_indexOf"},{type:"text_charAt"},{type:"text_getSubstring"},{type:"text_changeCase"},{type:"text_trim"}]},{name:"Loops",colour:"#5ba55b",blocks:[{type:"controls_repeat_ext"},{type:"controls_whileUntil"},{type:"controls_for"},{type:"controls_forEach"},{type:"controls_flow_statements"}]},{name:"Required",colour:"#5CA699",blocks:[{type:"board_setup"}]},{name:"Pins",colour:v.PIN,blocks:Z},{name:"LED",colour:v.LED,blocks:[{type:"set_led"},{type:"get_led"},{type:"led_on_off"}]},{name:"Button",colour:v.BUTTON,blocks:[{type:"set_button"},{type:"get_button"},{type:"button_on_off"}]},{name:"Lists",colour:"#745ba5",blocks:[{type:"lists_create_with"},{type:"lists_create_with"},{type:"lists_repeat"},{type:"lists_length"},{type:"lists_isEmpty"},{type:"lists_indexOf"},{type:"lists_getIndex"},{type:"lists_setIndex"},{type:"lists_getSublist"},{type:"lists_split"},{type:"lists_sort"}]}];console.log({toolboxCategories:ee});var te=ee,ne=n(121),oe=n.n(ne),ae=n(122),le=n.n(ae),ce=function(e,t,n,o,a){n.current=e,!t.current&&e&&(console.group("initialization"),console.log("Initializing Workspace"),console.groupEnd()),console.log({workspace:e});var l=d.a.Xml.domToText(d.a.Xml.workspaceToDom(e)),c=d.a.JavaScript.workspaceToCode(e),i="\n      const { RaspiIO } = require('raspi-io');\n      const five = require(\"johnny-five\");\n      const board = new five.Board({\n        io: new RaspiIO()\n      });\n    \n      ".concat(c),r=i;try{r=oe.a.format(i,{parser:"babel",plugins:[le.a]})}catch(s){console.group("Prettier Error"),console.error(s),console.groupEnd()}o===l&&t.current||(console.group("xml changed"),console.log("setting state"),console.groupEnd(),a({code:r,xml:l})),t.current=!0},ie=z.reduce((function(e,t){var n=Object(r.a)(t,1)[0],o="pin_".concat(n.replaceAll("#",""));return Object(s.a)(Object(s.a)({},e),{},Object(h.a)({},o,1))}),{}),re=function(e){console.group("xml error"),console.error(e),console.groupEnd()},se=Object(q.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),ue=function(e){var t=e.toolboxState,n=e.handleToolboxChange;console.group("BlocklyToolbox");var l=t.xml;console.log({xml:l});var c=Object(a.useRef)(),i=Object(a.useRef)(!1);console.log({workspaceRef:c});var r=function(e){c.current&&d.a.Variables.createVariableButtonHandler(c.current,null,e)},s=se();return console.groupEnd(),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:s.root,children:[Object(o.jsx)(Y.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return r("LED")},children:"Create LED"}),Object(o.jsx)(Y.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return r("BUTTON")},children:"Create Button"})]}),Object(o.jsx)(Q.a,{ref:c,toolboxCategories:te,initialXml:l,wrapperDivClassName:"fill-height",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0},maxInstances:ie},workspaceDidChange:function(e){return ce(e,i,c,l,n)},onImportXmlError:re,processToolboxCategory:function(e){return console.group("processToolboxCategory"),console.log({toolboxCategory:e}),console.groupEnd(),e}})]})},pe=n(5),de=n(125),be=n.n(de),me=n(126),je=n.n(me),fe=n(127),he=n.n(fe),ge=n(238),Oe=n(239),xe=n(240),ve=n(256),Ce=n(124),ye=n.n(Ce),_e="".concat(window.location.hostname,":8080"),ke=ye.a.connect(_e,{reconnect:!0}),Ne=l.a.createContext(),Se=function(e){var t=e.onClose,n=e.open,a=Object(u.a)(e,["onClose","open"]);return Object(o.jsxs)(ve.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},a),{},{children:[Object(o.jsx)(ge.a,{id:"confirmation-dialog-title",children:"Power Off?"}),Object(o.jsx)(Oe.a,{dividers:!0,children:"Are you sure you want to power off?"}),Object(o.jsxs)(xe.a,{children:[Object(o.jsx)(Y.a,{autoFocus:!0,onClick:function(){t(!1)},color:"primary",children:"No"}),Object(o.jsx)(Y.a,{onClick:function(){t(!0)},color:"primary",children:"yes"})]})]}))},Te=Object(pe.a)((function(e){return{root:{color:e.palette.getContrastText(e.palette.success.main),backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:e.palette.success.dark}}}}))(Y.a),Ie=function(e){var t=e.isProjectRunning,n=e.projectName,l=e.projectCode;console.group("Terminal");var c=Object(a.useState)(""),i=Object(r.a)(c,2),s=i[0],u=i[1],p=Object(a.useState)(""),d=Object(r.a)(p,2),b=d[0],m=d[1],j=Object(a.useRef)(null),f=Object(a.useState)(!1),h=Object(r.a)(f,2),g=h[0],O=h[1],x=Object(a.useContext)(Ne);console.log({socket:x});Object(a.useEffect)((function(){!function(){var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[s]),Object(a.useEffect)((function(){x.on("message",(function(e){console.group("on message");var t=String.fromCharCode.apply(null,new Uint8Array(e));console.log({buf:t}),u((function(e){return"".concat(e,'<p class="terminal">').concat(t,"</p>")})),console.groupEnd()})),x.on("exit",(function(e){console.group("on exit"),console.log({data:e}),console.groupEnd(),u((function(t){return"".concat(t,'<p class="terminal">').concat(e,"</p>")}))}))}),[x]);var v=Object(q.a)((function(e){return{buttonBar:{"& > *":{margin:e.spacing(1)},width:"100%",position:"fixed"},terminalContainer:{paddingTop:"46px"},shutdown:{float:"right"}}}))();return console.groupEnd(),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:v.buttonBar,children:[Object(o.jsx)(Te,{variant:"contained",size:"small",startIcon:Object(o.jsx)(be.a,{}),disabled:t||null==n||""===l,onClick:function(){console.group("handleRun"),console.log("emitting"),x.emit("copyProject",{projectCode:l}),setTimeout((function(){x.emit("message","sudo node /home/pi/Development/johnny-five/index.js"),x.emit("projectStarted")}),1e3),console.groupEnd()},children:"Play"}),Object(o.jsx)(Y.a,{variant:"contained",color:"secondary",size:"small",startIcon:Object(o.jsx)(je.a,{}),disabled:!t,onClick:function(){console.group("handleStop"),console.log("emitting");x.emit("message",".exit"),setTimeout((function(){x.emit("stopProject")}),500),console.groupEnd()},children:"Stop"}),Object(o.jsx)(Y.a,{variant:"contained",color:"secondary",size:"small",className:v.shutdown,startIcon:Object(o.jsx)(he.a,{}),disabled:t,onClick:function(){return O(!0)},children:"Turn off"}),Object(o.jsx)(Se,{id:"power-off-dialog",keepMounted:!0,open:g,onClose:function(e){console.group("handleClose"),O(!1),e&&(console.log("emitting powerOff"),x.emit("powerOff")),console.groupEnd()}})]}),Object(o.jsxs)("div",{className:"terminal ".concat(v.terminalContainer),children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"terminal",dangerouslySetInnerHTML:{__html:s}}),Object(o.jsx)("div",{ref:j})]}),Object(o.jsxs)("form",{className:"terminal",onSubmit:function(e){console.group("handleSubmit"),console.log({value:b}),console.log("emitting"),x.emit("message",b),m(""),e.preventDefault(),console.groupEnd()},children:[">"," ",Object(o.jsx)("input",{className:"terminal",value:b,onChange:function(e){return m(e.target.value)}})]})]})]})},De=n(242),Ee=n(249),Fe=n(250),we=n(253),Be=n(248),Pe=n(243),Ae=n(257),Me=n(244),Ve=n(245),Re=n(128),Je=n.n(Re),Le=n(246),Ge=n(247),Ue=n(129),He=n.n(Ue),ze=n(130),We=n.n(ze),Ke=function(e){var t=e.onClose,n=e.open,a=e.file,l=Object(u.a)(e,["onClose","open","file"]);return Object(o.jsxs)(ve.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},l),{},{children:[Object(o.jsx)(ge.a,{id:"confirmation-dialog-title",children:"Delete File?"}),Object(o.jsxs)(Oe.a,{dividers:!0,children:["Are you sure you want to delete ",a,"?"]}),Object(o.jsxs)(xe.a,{children:[Object(o.jsx)(Y.a,{autoFocus:!0,onClick:function(){t(!1)},color:"primary",children:"Cancel"}),Object(o.jsx)(Y.a,{onClick:function(){t(!0)},color:"secondary",children:"Delete"})]})]}))},Xe=n(241),Ye=function(e){var t=e.onClose,n=e.open,l=Object(u.a)(e,["onClose","open"]),c=Object(a.useState)(""),i=Object(r.a)(c,2),p=i[0],d=i[1];return Object(o.jsxs)(ve.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},l),{},{children:[Object(o.jsx)(ge.a,{id:"confirmation-dialog-title",children:"Delete File?"}),Object(o.jsxs)(Oe.a,{dividers:!0,children:[Object(o.jsx)(Xe.a,{children:"Enter the new project name to copy to"}),Object(o.jsx)(we.a,{autoFocus:!0,margin:"dense",id:"name",label:"New Project Name",type:"string",value:p,onChange:function(e){d(e.target.value)},fullWidth:!0})]}),Object(o.jsxs)(xe.a,{children:[Object(o.jsx)(Y.a,{autoFocus:!0,onClick:function(){t(!1,p),d("")},color:"primary",children:"Cancel"}),Object(o.jsx)(Y.a,{onClick:function(){t(!0,p),d("")},color:"secondary",disabled:""===p,children:"Copy"})]})]}))},qe=function(e){var t=e.selectedIndex,n=e.file,l=e.index,c=e.handleListItemClick,i=e.handleDelete,s=e.handleCopy;console.group("ProjectListItem");var u=Object(a.useState)(!1),p=Object(r.a)(u,2),d=p[0],b=p[1],m=Object(a.useState)(!1),j=Object(r.a)(m,2),f=j[0],h=j[1],g=Object(a.useCallback)((function(e){console.group("handleConfirmDeleteDialogClose"),b(!1),e&&i(n),console.groupEnd()}),[n,i]),O=Object(a.useCallback)((function(e,t){console.group("handleCopyDialogClose"),h(!1),e&&s(n,"".concat(t,".xml")),console.groupEnd()}),[n,s]);return console.groupEnd(),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(Pe.a,{button:!0,selected:t===l,onClick:function(e){return c(e,n)},children:[Object(o.jsx)(Me.a,{children:Object(o.jsx)(Ae.a,{children:Object(o.jsx)(Je.a,{})})}),Object(o.jsx)(Ve.a,{primary:n}),Object(o.jsxs)(Le.a,{children:[Object(o.jsx)(Ge.a,{edge:"end","aria-label":"delete",onClick:function(){return b(!0)},children:Object(o.jsx)(He.a,{})}),Object(o.jsx)(Ge.a,{edge:"end","aria-label":"copy",onClick:function(){return h(!0)},children:Object(o.jsx)(We.a,{})})]})]}),Object(o.jsx)(Ke,{keepMounted:!0,open:d,file:n,onClose:g}),Object(o.jsx)(Ye,{keepMounted:!0,open:f,onClose:O})]})},$e=Object(q.a)((function(e){return{listRoot:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,marginLeft:"auto",marginRight:"auto"},root:{flexGrow:1,margin:e.spacing(1)},formRoot:{"& > *":{margin:e.spacing(1),width:"25ch"}}}})),Qe=function(e){var t=e.handleProjectNameSelection;console.group("ProjectManager");var n=Object(a.useContext)(Ne),c=Object(a.useState)(null),i=Object(r.a)(c,2),s=i[0],u=i[1],p=Object(a.useState)(""),d=Object(r.a)(p,2),b=d[0],m=d[1],j=Object(a.useCallback)((function(e){console.group("handleDelete"),console.log("emitting deleteFile"),n.emit("deleteFile",{fileName:e}),console.groupEnd()}),[n]),f=Object(a.useCallback)((function(e,t){console.group("handleCopy"),console.log("emitting handleCopy"),n.emit("copyFile",{fileName:e,newFileName:t}),console.groupEnd()}),[n]),h=$e(),g=l.a.useState(null),O=Object(r.a)(g,2),x=O[0],v=O[1],C=Object(a.useCallback)((function(e,n){console.group("handleListItemClick"),console.log({file:n}),console.groupEnd(),t(n),v(null)}),[t]),y=Object(a.useCallback)((function(e){m(e.target.value)}),[]);Object(a.useEffect)((function(){console.log("emit getFiles"),n.emit("getFiles"),n.on("files",(function(e){console.group("on files"),console.log({data:e}),console.groupEnd(),u(e)}))}),[n]);var _=null;return null!==s&&(_=s.map((function(e,t){return Object(o.jsx)(qe,{file:e,index:t,selectedIndex:x,handleDelete:j,handleCopy:f,handleListItemClick:C},e)}))),console.groupEnd(),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:h.root,children:Object(o.jsxs)(Be.a,{container:!0,spacing:3,children:[Object(o.jsx)(Be.a,{item:!0,xs:6,children:Object(o.jsx)("div",{className:h.listRoot,children:null===_?Object(o.jsx)(Ee.a,{}):Object(o.jsx)(De.a,{component:"nav","aria-label":"project files",subheader:Object(o.jsx)(Fe.a,{component:"div",id:"nested-list-subheader",children:"Saved Projects"}),children:_})})}),Object(o.jsx)(Be.a,{item:!0,xs:6,children:Object(o.jsxs)("form",{className:h.formRoot,noValidate:!0,autoComplete:"off",children:[Object(o.jsx)(we.a,{id:"standard-basic",label:"New Project Name",value:b,onChange:y}),Object(o.jsx)(Y.a,{variant:"contained",color:"primary",disabled:0===b.trim().length||null===_,onClick:function(){var e="".concat(b.trim(),".xml");t(e),m("")},children:"Create New Project"})]})})]})})})};function Ze(e){var t=e.children,n=e.value,a=e.index,l=Object(u.a)(e,["children","value","index"]);return Object(o.jsx)("div",Object(s.a)(Object(s.a)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},l),{},{children:t}))}var et='<xml xmlns="https://developers.google.com/blockly/xml"><block type="board_setup" id="{`$}^q8GM8vjCjK?)f5u" x="90" y="30"></block></xml>',tt=function(){console.group("App");var e=Object(a.useState)({code:"",xml:et}),t=Object(r.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(0),i=Object(r.a)(c,2),s=i[0],u=i[1],p=Object(a.useState)(null),d=Object(r.a)(p,2),b=d[0],m=d[1],j=Object(a.useState)(!1),f=Object(r.a)(j,2),h=f[0],g=f[1],O=Object(a.useCallback)((function(e){m(e)}),[]),x=Object(a.useCallback)((function(e){var t=e.xml,n=e.code;l({xml:t,code:n}),null!==b&&(console.group("handleToolboxChange"),console.log({xml:t,projectName:b}),console.groupEnd(),ke.emit("saveFile",{contents:t,fileName:b}))}),[b]);return Object(a.useEffect)((function(){null!==b&&(console.group("getFile Effect"),console.log({projectName:b}),console.groupEnd(),ke.emit("getFile",{fileName:b}))}),[b]),Object(a.useEffect)((function(){ke.on("connect",(function(){console.log("Client has connected to the server!")})),ke.on("file",(function(e){if(console.group("on file"),""===e)console.log("blank file"),l({code:"",xml:et});else{var t=String.fromCharCode.apply(null,new Uint8Array(e));console.log({buf:t}),l({code:"",xml:t})}u(1),console.groupEnd()})),ke.on("projectStatus",(function(e){console.group("on projectStatus"),console.log({status:e}),g(e),console.groupEnd()}))}),[]),console.groupEnd(),Object(o.jsxs)(Ne.Provider,{value:ke,children:[Object(o.jsx)(W.a,{position:"static",children:Object(o.jsxs)(K.a,{value:s,onChange:function(e,t){u(t)},"aria-label":"Blockly Tabs",children:[Object(o.jsx)(X.a,{label:"Projects",disabled:h}),Object(o.jsx)(X.a,{label:"Blockly",disabled:null===b||h}),Object(o.jsx)(X.a,{label:"Code",disabled:null===b||h}),Object(o.jsx)(X.a,{label:"XML",disabled:null===b||h}),Object(o.jsx)(X.a,{label:"Run"})]})}),Object(o.jsx)(Ze,{value:s,index:0,children:Object(o.jsx)(Qe,{handleProjectNameSelection:O})}),Object(o.jsx)(Ze,{value:s,index:1,children:1===s&&Object(o.jsx)(ue,{toolboxState:n,handleToolboxChange:x})}),Object(o.jsx)(Ze,{value:s,index:2,children:Object(o.jsx)("pre",{children:n.code})}),Object(o.jsx)(Ze,{value:s,index:3,children:Object(o.jsx)("pre",{id:"generated-xml",children:n.xml})}),Object(o.jsx)(Ze,{value:s,index:4,children:Object(o.jsx)(Ie,{isProjectRunning:h,projectCode:n.code,projectName:b})})]})};i.a.render(Object(o.jsx)(l.a.StrictMode,{children:Object(o.jsx)(tt,{})}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.49b245e3.chunk.js.map