(this["webpackJsonpreact-pi-blocks-ui"]=this["webpackJsonpreact-pi-blocks-ui"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(3),o=n(0),i=n.n(o),l=n(11),r=n.n(l),c=(n(144),n(12)),s=n(14),u=n(34),p=(n(145),n(5)),d=n.n(p),b=n(23),m=n.n(b);d.a.Blocks.new_boundary_function={init:function(){this.appendDummyInput().appendField(new d.a.FieldTextInput("Boundary Function Name"),"Name"),this.appendStatementInput("Content").setCheck(null),this.setInputsInline(!0),this.setColour(315),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.new_boundary_function=function(e){return"def "+e.getFieldValue("Name")+"(_object,**kwargs):\n"+d.a.JavaScript.statementToCode(e,"Content")+"\n"},d.a.Blocks.return={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("return"),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setColour(330),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.return=function(e){return"return "+d.a.JavaScript.valueToCode(e,"NAME",d.a.Javascript.ORDER_ATOMIC)+"\n"},d.a.Blocks.board_setup={init:function(){this.appendDummyInput().appendField("Start"),this.setHelpUrl(""),this.setColour(50),this.appendStatementInput("MAIN").setCheck(null)}},d.a.JavaScript.board_setup=function(e){var t=d.a.JavaScript.statementToCode(e,"MAIN");return'\n  board.on("ready", () => {\n    '.concat(t,"\n  });\n  ")};var h,j=n(53),f=n(18),g="LED",O="BUTTON",v="PIN",x="PCF8591",C="SENSOR",_=(h={},Object(f.a)(h,g,"#6CB0F2"),Object(f.a)(h,O,"#6549DA"),Object(f.a)(h,v,"#9CDEF6"),Object(f.a)(h,x,"#FCA481"),Object(f.a)(h,C,"#123456"),h),y=function(e){return null===e||void 0===e||""===e};console.log({Blockly:d.a,jsBlockly:m.a});var S=function(e){var t=e.inputType,n=e.color,a=void 0===n?230:n;return{block:{setGenerator:function(e){var n=e.useText,o=e.variableName;return function(){this.appendDummyInput().appendField("Make Pin"),this.appendValueInput(v).setCheck(v),this.appendDummyInput().appendField(n),this.appendDummyInput(t).appendField(new d.a.FieldVariable(o,null,[t],t),t),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(a),this.setTooltip(""),this.setHelpUrl("")}},getGenerator:function(e){var n=e.variableName;return function(){this.appendDummyInput().appendField(new d.a.FieldVariable(n,null,[t],t),t),this.setOutput(!0,t),this.setColour(a)}},commandGenerator:function(e){var n=e.dropDownArray,o=e.variableName,i=e.validatorFunctionName,l=void 0===i?null:i;return function(){var e=null;if(null!=l){var i=this[l];i&&(e=i)}this.appendDummyInput().appendField("Make"),this.appendDummyInput(t).appendField(new d.a.FieldVariable(o,null,[t],t),t),this.appendDummyInput().appendField(new d.a.FieldDropdown(n,e),"".concat(t,"_COMMAND")),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(a),this.setTooltip(""),this.setHelpUrl("")}}},code:{setGenerator:function(e){var n=e.constructorName;return function(e){var a=d.a.JavaScript.valueToCode(e,v,d.a.JavaScript.ORDER_ATOMIC),o=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return y(a)||y(o)?"":"".concat(o," = new ").concat(n,"(").concat(a,");\n")}},getGenerator:function(){return function(e){return[d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE),d.a.JavaScript.ORDER_ATOMIC]}},commandGenerator:function(){return function(e){var n=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);if(y(n))return"";var a=e.getFieldValue("".concat(t,"_COMMAND"));return"".concat(n).concat(a,";\n")}}}}},I=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n][1])return!0;return!1},N=S({inputType:"LED",color:_.LED}),F=N.code,T=N.block,k="LED Name";d.a.Blocks.set_led={init:T.setGenerator({useText:"be used for LED named",variableName:k})},d.a.JavaScript.set_led=F.setGenerator({constructorName:"five.Led"}),d.a.Blocks.get_led={init:T.getGenerator({variableName:k})},d.a.JavaScript.get_led=F.getGenerator();var P,D={blink:{dropDownItem:"Blink",beforeText:"every",afterText:"milliseconds",fieldBlock:new d.a.FieldNumber(500,0),fieldName:"BLINK_TIME_IN_MS",codeGenerator:function(e){var t=d.a.JavaScript.valueToCode(e,"LED",d.a.JavaScript.ORDER_ATOMIC);if(y(t))return"";var n=d.a.JavaScript.variableDB_.getName(t,d.a.Variables.NAME_TYPE),a=e.getFieldValue("LED_COMMAND"),o=e.getFieldValue("BLINK_TIME_IN_MS");return"".concat(n,".").concat(a,"(").concat(o,");\n")}}},E=(P=D,Object.keys(P).reduce((function(e,t){return[].concat(Object(j.a)(e),[[P[t].dropDownItem,t]])}),[]));d.a.Blocks.led_on_off={init:T.commandGenerator({dropDownArray:[].concat([["Turn On",".on()"],["Turn Off",".off()"],["Start Pulsing",".pulse()"],["Stop Pulsing",".stop()"],["Fade In",".fadeIn()"],["Fade Out",".fadeOut()"]],Object(j.a)(E)),validatorFunctionName:"validate",variableName:k}),mutationToDom:function(){var e=document.createElement("mutation"),t=this.getFieldValue("LED_COMMAND");return I(t,E)?e.setAttribute("additionalParam",t):e.setAttribute("additionalParam",""),e},domToMutation:function(e){var t=e.getAttribute("additionalParam");this.updateShape_(t)},validate:function(e){return this.getSourceBlock().updateShape_(e),e},updateShape_:function(e){var t=I(e,E),n=this.getInput("ADDITIONAL_PARAM");if(t){if(!n){var a=D[e],o=a.beforeText,i=a.fieldBlock,l=a.fieldName,r=a.afterText;this.appendDummyInput("ADDITIONAL_PARAM").appendField(o).appendField(i,l).appendField(r)}}else n&&this.removeInput("ADDITIONAL_PARAM")}},d.a.JavaScript.led_on_off=function(e){var t=e.getFieldValue("LED_COMMAND");return I(t,E)?D[t].codeGenerator(e):F.commandGenerator()(e)};var A=O,w=_.BUTTON,M="Button Name",B=S({inputType:A,color:w}),V=B.code,J=B.block;d.a.Blocks.set_button={init:J.setGenerator({useText:"be used for Button named",variableName:M})},d.a.JavaScript.set_button=V.setGenerator({constructorName:"five.Button"}),d.a.Blocks.get_button={init:J.getGenerator({variableName:M})},d.a.JavaScript.get_button=V.getGenerator(),d.a.Blocks.button_on_off={init:function(){this.appendDummyInput().appendField("When"),this.appendDummyInput(A).appendField(new d.a.FieldVariable(M,null,[A],A),A),this.appendDummyInput().appendField("is").appendField(new d.a.FieldDropdown([["Down","down"],["Up","up"],["Hold","hold"]]),"BUTTON_COMMAND"),this.appendStatementInput("BUTTON_STMT").setCheck(null),this.setColour(w),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript.button_on_off=function(e){var t=e.getFieldValue("BUTTON_COMMAND"),n=d.a.JavaScript.statementToCode(e,"BUTTON_STMT"),a=d.a.JavaScript.variableDB_.getName(e.getFieldValue(A),d.a.Variables.NAME_TYPE);return"\n  ".concat(a,'.on("').concat(t,'", () => {\n    ').concat(n,"\n  });\n  ")};var R=[["#4","P1-7"],["#5","P1-29"],["#6","P1-31"],["#12","P1-32"],["#13","P1-33"],["#16","P1-36"],["#17","P1-11"],["#18","P1-12"],["#19","P1-35"],["#20","P1-38"],["#21","P1-40"],["#23","P1-16"],["#24","P1-18"],["#25","P1-22"],["#26","P1-37"],["#27","P1-13"]],G=(R.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(f.a)({},t[0],t[1]))}),{}),function(e){return"pin_".concat(e.replaceAll("#",""))}),L=R;L.forEach((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1],o=G(n);d.a.Blocks[o]={init:function(){this.appendDummyInput().appendField("Pin ".concat(n)),this.setOutput(!0,v),this.setColour(_.PIN),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript[o]=function(){return["'".concat(a,"'"),d.a.JavaScript.ORDER_ATOMIC]}}));var U=function(e){return"pin_PCF8591_".concat(e)},H=["A0","A1","A2","A3"],Y=function(e){var t=e.inputType,n=e.color;return{block:{setGenerator:function(e){var a=e.variableName,o=e.useText;return function(){this.appendDummyInput().appendField(o),this.appendDummyInput(t).appendField(new d.a.FieldVariable(a,null,[t],t),t),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(n),this.setTooltip(""),this.setHelpUrl("")}},getGenerator:function(e){var a=e.variableName;return function(){this.appendDummyInput().appendField(new d.a.FieldVariable(a,null,[t],t),t),this.setOutput(!0,t),this.setColour(n)}},useGenerator:function(e){var a=e.variableName,o=e.pinType;return function(){this.appendDummyInput().appendField("Use"),this.appendDummyInput(t).appendField(new d.a.FieldVariable(a,null,[t],t),t),this.appendDummyInput().appendField("with PIN"),this.appendValueInput(o).setCheck(o),this.appendStatementInput("".concat(t,"_STMT")).setCheck(null),this.setColour(n),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}}},code:{setGenerator:function(e){var n=e.expanderName;return function(e){var a=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return"".concat(a,' = new five.Board.Virtual(\n        new five.Expander("').concat(n,'")\n      );')}},getGenerator:function(){return function(e){return[d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE),d.a.JavaScript.ORDER_ATOMIC]}},useGenerator:function(e){var n=e.pinType;return function(e){var a=d.a.JavaScript.statementToCode(e,"".concat(t,"_STMT")),o=d.a.JavaScript.valueToCode(e,n,d.a.JavaScript.ORDER_ATOMIC),i=d.a.JavaScript.variableDB_.getName(e.getFieldValue(t),d.a.Variables.NAME_TYPE);return y(o)||y(i)?"":"(() => {\n        const additionalParams = {\n          pin: ".concat(o,",\n          board: '").concat(i,"'\n          \n        };\n        ").concat(a,"\n      })();\n      ")}}}}},z=_.PCF8591,W="PCF9581 (ADC) Name",q="PIN_PCF8591";H.forEach((function(e){var t=U(e);d.a.Blocks[t]={init:function(){this.appendDummyInput().appendField("PCF8591 Pin ".concat(e)),this.setOutput(!0,q),this.setColour(z),this.setTooltip(""),this.setHelpUrl("")}},d.a.JavaScript[t]=function(){return["'".concat(e,"'"),d.a.JavaScript.ORDER_ATOMIC]}}));var K=Y({inputType:"PCF8591",color:z}),X=K.code,Q=K.block;d.a.Blocks.set_PCF8591={init:Q.setGenerator({useText:"Create PCF8591 (ADC) named:",variableName:W})},d.a.JavaScript.set_PCF8591=X.setGenerator({expanderName:"PCF8591"}),d.a.Blocks.get_PCF8591={init:Q.getGenerator({variableName:W})},d.a.JavaScript.get_PCF8591=X.getGenerator(),d.a.Blocks.use_PCF8591={init:Q.useGenerator({variableName:W,pinType:q})},d.a.JavaScript.use_PCF8591=X.useGenerator({pinType:q});var $=C,Z=_.SENSOR,ee="Sensor Name",te="THRESHOLD",ne="FREQUENCY_IN_MS",ae="custom options",oe=[["defaults","defaults"],[ae,ae]],ie="gpio_yes",le=[["No","gpio_no"],["Yes",ie]],re="customOptions",ce="customGPIO",se="CUSTOM_OPTIONS_DUMMY_INPUT",ue="PIN_INPUT",pe=function(e){return"".concat(e,"_CUSTOM_OPTIONS")},de=function(e){return"".concat(e,"_CUSTOM_GPIO")},be=function(e){return e===ae},me=function(e){return e===ie};d.a.Blocks.set_sensor={init:function(){this.appendDummyInput().appendField("Create Sensor").appendField(new d.a.FieldVariable(ee,null,[$],$),$).appendField("with").appendField(new d.a.FieldDropdown(oe,this.validateCustomOptions),pe($)),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(Z),this.setTooltip(""),this.setHelpUrl("")},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getFieldValue(pe($));if(be(t)){e.setAttribute(re,t);var n=this.getFieldValue(de($));me(n)&&e.setAttribute(ce,n)}else e.setAttribute(re,""),e.setAttribute(ce,"");return e},domToMutation:function(e){var t=e.getAttribute(re),n=e.getAttribute(ce);this.updateShapeCustomOptionShape_(t),this.updateShapeGPIOShape_(n)},validateCustomOptions:function(e){return this.getSourceBlock().updateShapeCustomOptionShape_(e),e},validateGPIO:function(e){return this.getSourceBlock().updateShapeGPIOShape_(e),e},updateShapeCustomOptionShape_:function(e){var t=be(e),n=this.getInput(se);if(t)n||(this.setInputsInline(!1),this.appendDummyInput(se).appendField(" Threshold:").appendField(new d.a.FieldNumber(1,1,1023),te).appendField(" and Frequency:").appendField(new d.a.FieldNumber(25,1),ne).appendField(" Use GPIO?").appendField(new d.a.FieldDropdown(le,this.validateGPIO),de($)));else if(n){this.removeInput(se);try{this.removeInput(ue)}catch(a){console.log(a)}this.setInputsInline(!0)}},updateShapeGPIOShape_:function(e){var t=me(e),n=this.getInput(ue);t?n||this.appendValueInput(ue).setCheck(v).setAlign(d.a.ALIGN_RIGHT).appendField("GPIO Pin"):n&&this.removeInput(ue)}},d.a.JavaScript.set_sensor=function(e){var t=d.a.JavaScript.variableDB_.getName(e.getFieldValue($),d.a.Variables.NAME_TYPE);if(y(ee))return"";var n=e.getFieldValue(te),a=e.getFieldValue(ne),o=d.a.JavaScript.valueToCode(e,ue,d.a.JavaScript.ORDER_ATOMIC),i={};y(n)||(i.threshold=n),y(a)||(i.freq=a),y(o)||(i.pin=o.replaceAll("'","")),console.log({args:i});var l="".concat(t,"__ARGS");return"\n    let ".concat(l," = ").concat(JSON.stringify(i),";\n    try {\n        ").concat(l," = {\n            ...additionalParams,\n            ...").concat(l,"\n        } ;\n    } catch(e) {} // do nothing\n\n    ").concat(t," = new five.Sensor(").concat(l,");")};var he=n(251),je=n(254),fe=n(252),ge=n(236),Oe=n(233),ve=n(120),xe=n.n(ve),Ce=L.map((function(e){var t=Object(c.a)(e,1)[0];return{type:G(t)}})),_e=H.map((function(e){return{type:U(e)}})),ye=[{name:"Variables",custom:"VARIABLE",colour:"#a55b80"},{name:"Logic",colour:"#5C81A6",blocks:[{type:"controls_if"},{type:"logic_compare"},{type:"logic_operation"},{type:"logic_negate"},{type:"logic_boolean"},{type:"logic_null"},{type:"logic_ternary"}]},{name:"Math",colour:"#5CA65C",blocks:[{type:"math_number"},{type:"math_arithmetic"},{type:"math_single"},{type:"math_trig"},{type:"math_constant"},{type:"math_number_property"},{type:"math_round"},{type:"math_on_list"},{type:"math_modulo"},{type:"math_constrain"},{type:"math_random_int"},{type:"math_random_float"}]},{name:"Text",colour:"#5CA65C",blocks:[{type:"text"},{type:"text_print"},{type:"text_join"},{type:"text_append"},{type:"text_length"},{type:"text_isEmpty"},{type:"text_indexOf"},{type:"text_charAt"},{type:"text_getSubstring"},{type:"text_changeCase"},{type:"text_trim"}]},{name:"Loops",colour:"#5ba55b",blocks:[{type:"controls_repeat_ext"},{type:"controls_whileUntil"},{type:"controls_for"},{type:"controls_forEach"},{type:"controls_flow_statements"}]},{name:"Required",colour:"#5CA699",blocks:[{type:"board_setup"}]},{name:"Pins",colour:_.PIN,blocks:Ce},{name:"LED",colour:_.LED,blocks:[{type:"set_led"},{type:"get_led"},{type:"led_on_off"}]},{name:"Button",colour:_.BUTTON,blocks:[{type:"set_button"},{type:"get_button"},{type:"button_on_off"}]},{name:"PCF9581 (ADC)",colour:_.PCF8591,blocks:[{type:"set_PCF8591"},{type:"get_PCF8591"},{type:"use_PCF8591"}].concat(Object(j.a)(_e))},{name:"Sensor",colour:_.SENSOR,blocks:[{type:"set_sensor"}]},{name:"Lists",colour:"#745ba5",blocks:[{type:"lists_create_with"},{type:"lists_create_with"},{type:"lists_repeat"},{type:"lists_length"},{type:"lists_isEmpty"},{type:"lists_indexOf"},{type:"lists_getIndex"},{type:"lists_setIndex"},{type:"lists_getSublist"},{type:"lists_split"},{type:"lists_sort"}]}];console.log({toolboxCategories:ye});var Se=ye,Ie=n(121),Ne=n.n(Ie),Fe=n(122),Te=n.n(Fe),ke=function(e,t,n,a,o){n.current=e,!t.current&&e&&(console.group("initialization"),console.log("Initializing Workspace"),console.groupEnd());var i=d.a.Xml.domToText(d.a.Xml.workspaceToDom(e)),l=d.a.JavaScript.workspaceToCode(e),r="\n      const { RaspiIO } = require('raspi-io');\n      const five = require(\"johnny-five\");\n      const board = new five.Board({\n        io: new RaspiIO()\n      });\n    \n      ".concat(l).replaceAll("window.alert","console.log"),c=r;try{c=Ne.a.format(r,{parser:"babel",plugins:[Te.a]})}catch(s){console.group("Prettier Error"),console.error(s),console.groupEnd()}a===i&&t.current||(console.group("xml changed"),console.log("setting state"),console.groupEnd(),o({code:c,xml:i})),t.current=!0},Pe=L.reduce((function(e,t){var n=Object(c.a)(t,1)[0],a=G(n);return Object(s.a)(Object(s.a)({},e),{},Object(f.a)({},a,1))}),{}),De=H.reduce((function(e,t){var n=U(t);return Object(s.a)(Object(s.a)({},e),{},Object(f.a)({},n,1))}),{}),Ee=Object(s.a)(Object(s.a)({},Pe),De),Ae=function(e){console.group("xml error"),console.error(e),console.groupEnd()},we=Object(Oe.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),Me=function(e){var t=e.toolboxState,n=e.handleToolboxChange;console.group("BlocklyToolbox");var i=t.xml;console.log({xml:i});var l=Object(o.useRef)(),r=Object(o.useRef)(!1);console.log({workspaceRef:l});var c=function(e){l.current&&d.a.Variables.createVariableButtonHandler(l.current,null,e)},s=we();return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsx)(ge.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(g)},children:"Create LED"}),Object(a.jsx)(ge.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(O)},children:"Create Button"}),Object(a.jsx)(ge.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(x)},children:"Create PCF8591"}),Object(a.jsx)(ge.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){return c(C)},children:"Create Sensor"})]}),Object(a.jsx)(xe.a,{ref:l,toolboxCategories:Se,initialXml:i,wrapperDivClassName:"fill-height",workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0},maxInstances:Ee},workspaceDidChange:function(e){return ke(e,r,l,i,n)},onImportXmlError:Ae,processToolboxCategory:function(e){return console.group("processToolboxCategory"),console.log({toolboxCategory:e}),console.groupEnd(),e}})]})},Be=n(6),Ve=n(125),Je=n.n(Ve),Re=n(126),Ge=n.n(Re),Le=n(127),Ue=n.n(Le),He=n(238),Ye=n(239),ze=n(240),We=n(256),qe=n(124),Ke=n.n(qe),Xe="".concat(window.location.hostname,":8080"),Qe=Ke.a.connect(Xe,{reconnect:!0}),$e=i.a.createContext(),Ze=function(e){var t=e.onClose,n=e.open,o=Object(u.a)(e,["onClose","open"]);return Object(a.jsxs)(We.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},o),{},{children:[Object(a.jsx)(He.a,{id:"confirmation-dialog-title",children:"Power Off?"}),Object(a.jsx)(Ye.a,{dividers:!0,children:"Are you sure you want to power off?"}),Object(a.jsxs)(ze.a,{children:[Object(a.jsx)(ge.a,{autoFocus:!0,onClick:function(){t(!1)},color:"primary",children:"No"}),Object(a.jsx)(ge.a,{onClick:function(){t(!0)},color:"primary",children:"yes"})]})]}))},et=Object(Be.a)((function(e){return{root:{color:e.palette.getContrastText(e.palette.success.main),backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:e.palette.success.dark}}}}))(ge.a),tt=function(e){var t=e.isProjectRunning,n=e.projectName,i=e.projectCode;console.group("Terminal");var l=Object(o.useState)(""),r=Object(c.a)(l,2),s=r[0],u=r[1],p=Object(o.useState)(""),d=Object(c.a)(p,2),b=d[0],m=d[1],h=Object(o.useRef)(null),j=Object(o.useState)(!1),f=Object(c.a)(j,2),g=f[0],O=f[1],v=Object(o.useContext)($e);console.log({socket:v});Object(o.useEffect)((function(){!function(){var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[s]),Object(o.useEffect)((function(){v.on("message",(function(e){console.group("on message");var t=String.fromCharCode.apply(null,new Uint8Array(e));console.log({buf:t}),u((function(e){return"".concat(e,'<p class="terminal">').concat(t,"</p>")})),console.groupEnd()})),v.on("exit",(function(e){console.group("on exit"),console.log({data:e}),console.groupEnd(),u((function(t){return"".concat(t,'<p class="terminal">').concat(e,"</p>")}))}))}),[v]);var x=Object(Oe.a)((function(e){return{buttonBar:{"& > *":{margin:e.spacing(1)},width:"100%",position:"fixed"},terminalContainer:{paddingTop:"46px"},shutdown:{float:"right"}}}))();return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:x.buttonBar,children:[Object(a.jsx)(et,{variant:"contained",size:"small",startIcon:Object(a.jsx)(Je.a,{}),disabled:t||null==n||""===i,onClick:function(){console.group("handleRun"),console.log("emitting"),v.emit("copyProject",{projectCode:i}),setTimeout((function(){v.emit("message","sudo node /home/pi/Development/johnny-five/index.js"),v.emit("projectStarted")}),1e3),console.groupEnd()},children:"Play"}),Object(a.jsx)(ge.a,{variant:"contained",color:"secondary",size:"small",startIcon:Object(a.jsx)(Ge.a,{}),disabled:!t,onClick:function(){console.group("handleStop"),console.log("emitting");v.emit("message",".exit"),setTimeout((function(){v.emit("stopProject")}),500),console.groupEnd()},children:"Stop"}),Object(a.jsx)(ge.a,{variant:"contained",color:"secondary",size:"small",className:x.shutdown,startIcon:Object(a.jsx)(Ue.a,{}),disabled:t,onClick:function(){return O(!0)},children:"Turn off"}),Object(a.jsx)(Ze,{id:"power-off-dialog",keepMounted:!0,open:g,onClose:function(e){console.group("handleClose"),O(!1),e&&(console.log("emitting powerOff"),v.emit("powerOff")),console.groupEnd()}})]}),Object(a.jsxs)("div",{className:"terminal ".concat(x.terminalContainer),children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"terminal",dangerouslySetInnerHTML:{__html:s}}),Object(a.jsx)("div",{ref:h})]}),Object(a.jsxs)("form",{className:"terminal",onSubmit:function(e){console.group("handleSubmit"),console.log({value:b}),console.log("emitting"),v.emit("message",b),m(""),e.preventDefault(),console.groupEnd()},children:[">"," ",Object(a.jsx)("input",{className:"terminal",value:b,onChange:function(e){return m(e.target.value)}})]})]})]})},nt=n(242),at=n(249),ot=n(250),it=n(253),lt=n(248),rt=n(243),ct=n(257),st=n(244),ut=n(245),pt=n(128),dt=n.n(pt),bt=n(246),mt=n(247),ht=n(129),jt=n.n(ht),ft=n(130),gt=n.n(ft),Ot=function(e){var t=e.onClose,n=e.open,o=e.file,i=Object(u.a)(e,["onClose","open","file"]);return Object(a.jsxs)(We.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},i),{},{children:[Object(a.jsx)(He.a,{id:"confirmation-dialog-title",children:"Delete File?"}),Object(a.jsxs)(Ye.a,{dividers:!0,children:["Are you sure you want to delete ",o,"?"]}),Object(a.jsxs)(ze.a,{children:[Object(a.jsx)(ge.a,{autoFocus:!0,onClick:function(){t(!1)},color:"primary",children:"Cancel"}),Object(a.jsx)(ge.a,{onClick:function(){t(!0)},color:"secondary",children:"Delete"})]})]}))},vt=n(241),xt=function(e){var t=e.onClose,n=e.open,i=Object(u.a)(e,["onClose","open"]),l=Object(o.useState)(""),r=Object(c.a)(l,2),p=r[0],d=r[1];return Object(a.jsxs)(We.a,Object(s.a)(Object(s.a)({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs","aria-labelledby":"confirmation-dialog-title",open:n},i),{},{children:[Object(a.jsx)(He.a,{id:"confirmation-dialog-title",children:"Delete File?"}),Object(a.jsxs)(Ye.a,{dividers:!0,children:[Object(a.jsx)(vt.a,{children:"Enter the new project name to copy to"}),Object(a.jsx)(it.a,{autoFocus:!0,margin:"dense",id:"name",label:"New Project Name",type:"string",value:p,onChange:function(e){d(e.target.value)},fullWidth:!0})]}),Object(a.jsxs)(ze.a,{children:[Object(a.jsx)(ge.a,{autoFocus:!0,onClick:function(){t(!1,p),d("")},color:"primary",children:"Cancel"}),Object(a.jsx)(ge.a,{onClick:function(){t(!0,p),d("")},color:"secondary",disabled:""===p,children:"Copy"})]})]}))},Ct=function(e){var t=e.selectedIndex,n=e.file,i=e.index,l=e.handleListItemClick,r=e.handleDelete,s=e.handleCopy;console.group("ProjectListItem");var u=Object(o.useState)(!1),p=Object(c.a)(u,2),d=p[0],b=p[1],m=Object(o.useState)(!1),h=Object(c.a)(m,2),j=h[0],f=h[1],g=Object(o.useCallback)((function(e){console.group("handleConfirmDeleteDialogClose"),b(!1),e&&r(n),console.groupEnd()}),[n,r]),O=Object(o.useCallback)((function(e,t){console.group("handleCopyDialogClose"),f(!1),e&&s(n,"".concat(t,".xml")),console.groupEnd()}),[n,s]);return console.groupEnd(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(rt.a,{button:!0,selected:t===i,onClick:function(e){return l(e,n)},children:[Object(a.jsx)(st.a,{children:Object(a.jsx)(ct.a,{children:Object(a.jsx)(dt.a,{})})}),Object(a.jsx)(ut.a,{primary:n}),Object(a.jsxs)(bt.a,{children:[Object(a.jsx)(mt.a,{edge:"end","aria-label":"delete",onClick:function(){return b(!0)},children:Object(a.jsx)(jt.a,{})}),Object(a.jsx)(mt.a,{edge:"end","aria-label":"copy",onClick:function(){return f(!0)},children:Object(a.jsx)(gt.a,{})})]})]}),Object(a.jsx)(Ot,{keepMounted:!0,open:d,file:n,onClose:g}),Object(a.jsx)(xt,{keepMounted:!0,open:j,onClose:O})]})},_t=Object(Oe.a)((function(e){return{listRoot:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,marginLeft:"auto",marginRight:"auto"},root:{flexGrow:1,margin:e.spacing(1)},formRoot:{"& > *":{margin:e.spacing(1),width:"25ch"}}}})),yt=function(e){var t=e.handleProjectNameSelection;console.group("ProjectManager");var n=Object(o.useContext)($e),l=Object(o.useState)(null),r=Object(c.a)(l,2),s=r[0],u=r[1],p=Object(o.useState)(""),d=Object(c.a)(p,2),b=d[0],m=d[1],h=Object(o.useCallback)((function(e){console.group("handleDelete"),console.log("emitting deleteFile"),n.emit("deleteFile",{fileName:e}),console.groupEnd()}),[n]),j=Object(o.useCallback)((function(e,t){console.group("handleCopy"),console.log("emitting handleCopy"),n.emit("copyFile",{fileName:e,newFileName:t}),console.groupEnd()}),[n]),f=_t(),g=i.a.useState(null),O=Object(c.a)(g,2),v=O[0],x=O[1],C=Object(o.useCallback)((function(e,n){console.group("handleListItemClick"),console.log({file:n}),console.groupEnd(),t(n),x(null)}),[t]),_=Object(o.useCallback)((function(e){m(e.target.value)}),[]);Object(o.useEffect)((function(){console.log("emit getFiles"),n.emit("getFiles"),n.on("files",(function(e){console.group("on files"),console.log({data:e}),console.groupEnd(),u(e)}))}),[n]);var y=null;return null!==s&&(y=s.map((function(e,t){return Object(a.jsx)(Ct,{file:e,index:t,selectedIndex:v,handleDelete:h,handleCopy:j,handleListItemClick:C},e)}))),console.groupEnd(),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:f.root,children:Object(a.jsxs)(lt.a,{container:!0,spacing:3,children:[Object(a.jsx)(lt.a,{item:!0,xs:6,children:Object(a.jsx)("div",{className:f.listRoot,children:null===y?Object(a.jsx)(at.a,{}):Object(a.jsx)(nt.a,{component:"nav","aria-label":"project files",subheader:Object(a.jsx)(ot.a,{component:"div",id:"nested-list-subheader",children:"Saved Projects"}),children:y})})}),Object(a.jsx)(lt.a,{item:!0,xs:6,children:Object(a.jsxs)("form",{className:f.formRoot,noValidate:!0,autoComplete:"off",children:[Object(a.jsx)(it.a,{id:"standard-basic",label:"New Project Name",value:b,onChange:_}),Object(a.jsx)(ge.a,{variant:"contained",color:"primary",disabled:0===b.trim().length||null===y,onClick:function(){var e="".concat(b.trim(),".xml");t(e),m("")},children:"Create New Project"})]})})]})})})};function St(e){var t=e.children,n=e.value,o=e.index,i=Object(u.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(s.a)(Object(s.a)({role:"tabpanel",hidden:n!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o)},i),{},{children:t}))}var It='<xml xmlns="https://developers.google.com/blockly/xml"><block type="board_setup" id="{`$}^q8GM8vjCjK?)f5u" x="90" y="30"></block></xml>',Nt=function(){console.group("App");var e=Object(o.useState)({code:"",xml:It}),t=Object(c.a)(e,2),n=t[0],i=t[1],l=Object(o.useState)(0),r=Object(c.a)(l,2),s=r[0],u=r[1],p=Object(o.useState)(null),d=Object(c.a)(p,2),b=d[0],m=d[1],h=Object(o.useState)(!1),j=Object(c.a)(h,2),f=j[0],g=j[1],O=Object(o.useCallback)((function(e){m(e)}),[]),v=Object(o.useCallback)((function(e){var t=e.xml,n=e.code;i({xml:t,code:n}),null!==b&&(console.group("handleToolboxChange"),console.log({xml:t,projectName:b}),console.groupEnd(),Qe.emit("saveFile",{contents:t,fileName:b}))}),[b]);return Object(o.useEffect)((function(){null!==b&&(console.group("getFile Effect"),console.log({projectName:b}),console.groupEnd(),Qe.emit("getFile",{fileName:b}))}),[b]),Object(o.useEffect)((function(){Qe.on("connect",(function(){console.log("Client has connected to the server!")})),Qe.on("file",(function(e){if(console.group("on file"),""===e)console.log("blank file"),i({code:"",xml:It});else{var t=String.fromCharCode.apply(null,new Uint8Array(e));console.log({buf:t}),i({code:"",xml:t})}u(1),console.groupEnd()})),Qe.on("projectStatus",(function(e){console.group("on projectStatus"),console.log({status:e}),g(e),console.groupEnd()}))}),[]),console.groupEnd(),Object(a.jsxs)($e.Provider,{value:Qe,children:[Object(a.jsx)(he.a,{position:"static",children:Object(a.jsxs)(je.a,{value:s,onChange:function(e,t){u(t)},"aria-label":"Blockly Tabs",children:[Object(a.jsx)(fe.a,{label:"Projects",disabled:f}),Object(a.jsx)(fe.a,{label:"Blockly",disabled:null===b||f}),Object(a.jsx)(fe.a,{label:"Code",disabled:null===b||f}),Object(a.jsx)(fe.a,{label:"XML",disabled:null===b||f}),Object(a.jsx)(fe.a,{label:"Run"})]})}),Object(a.jsx)(St,{value:s,index:0,children:Object(a.jsx)(yt,{handleProjectNameSelection:O})}),Object(a.jsx)(St,{value:s,index:1,children:1===s&&Object(a.jsx)(Me,{toolboxState:n,handleToolboxChange:v})}),Object(a.jsx)(St,{value:s,index:2,children:Object(a.jsx)("pre",{children:n.code})}),Object(a.jsx)(St,{value:s,index:3,children:Object(a.jsx)("pre",{id:"generated-xml",children:n.xml})}),Object(a.jsx)(St,{value:s,index:4,children:Object(a.jsx)(tt,{isProjectRunning:f,projectCode:n.code,projectName:b})})]})};r.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Nt,{})}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.e88cada8.chunk.js.map